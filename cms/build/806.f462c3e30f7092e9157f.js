(self.webpackChunkpayload_template_ts_blog=self.webpackChunkpayload_template_ts_blog||[]).push([[806],{6907:e=>{"use strict";e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var t="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+r+"]*["+t+"]"),a=new RegExp("^[^"+t+"]*["+r+"]")},18156:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},l=1;l<20;l++)o["f"+l]=111+l;function i(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return s(e,t)})),a=function(e){return n.some((function(t){return c(t,e)}))};return null==r?a:a(r)}function s(e,t){var r=t&&t.byKey,l={},i=(e=e.replace("++","+add")).split("+"),s=i.length;for(var c in n)l[n[c]]=!1;var f=!0,h=!1,m=void 0;try{for(var p,v=i[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value,E=g.endsWith("?")&&g.length>1;E&&(g=g.slice(0,-1));var w=u(g),b=n[w];if(g.length>1&&!b&&!a[g]&&!o[w])throw new TypeError('Unknown modifier: "'+g+'"');1!==s&&b||(r?l.key=w:l.which=d(g)),b&&(l[b]=!E||null)}}catch(e){h=!0,m=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw m}}return l}function c(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function d(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=a[e]||e}t.ZP=i},62705:(e,t,r)=>{var n=r(55639).Symbol;e.exports=n},44239:(e,t,r)=>{var n=r(62705),a=r(89607),o=r(2333),l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?a(e):o(e)}},27561:(e,t,r)=>{var n=r(67990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},31957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},89607:(e,t,r)=>{var n=r(62705),a=Object.prototype,o=a.hasOwnProperty,l=a.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var a=l.call(e);return n&&(t?e[i]=r:delete e[i]),a}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:(e,t,r)=>{var n=r(31957),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},67990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},23279:(e,t,r)=>{var n=r(13218),a=r(7771),o=r(14841),l=Math.max,i=Math.min;e.exports=function(e,t,r){var s,c,d,u,f,h,m=0,p=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var r=s,n=c;return s=c=void 0,m=t,u=e.apply(n,r)}function w(e){return m=e,f=setTimeout(y,t),p?E(e):u}function b(e){var r=e-h;return void 0===h||r>=t||r<0||v&&e-m>=d}function y(){var e=a();if(b(e))return x(e);f=setTimeout(y,function(e){var r=t-(e-h);return v?i(r,d-(e-m)):r}(e))}function x(e){return f=void 0,g&&s?E(e):(s=c=void 0,u)}function k(){var e=a(),r=b(e);if(s=arguments,c=this,h=e,r){if(void 0===f)return w(h);if(v)return clearTimeout(f),f=setTimeout(y,t),E(h)}return void 0===f&&(f=setTimeout(y,t)),u}return t=o(t)||0,n(r)&&(p=!!r.leading,d=(v="maxWait"in r)?l(o(r.maxWait)||0,t):d,g="trailing"in r?!!r.trailing:g),k.cancel=function(){void 0!==f&&clearTimeout(f),m=0,s=h=c=f=void 0},k.flush=function(){return void 0===f?u:x(a())},k}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},33448:(e,t,r)=>{var n=r(44239),a=r(37005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},7771:(e,t,r)=>{var n=r(55639);e.exports=function(){return n.Date.now()}},23493:(e,t,r)=>{var n=r(23279),a=r(13218);e.exports=function(e,t,r){var o=!0,l=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,l="trailing"in r?!!r.trailing:l),n(e,t,{leading:o,maxWait:t,trailing:l})}},14841:(e,t,r)=>{var n=r(27561),a=r(13218),o=r(33448),l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=i.test(e);return r||s.test(e)?c(e.slice(2),r?2:8):l.test(e)?NaN:+e}},21806:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ga});var n=r(67294),a=r(18156),o=r(94822),l=r(6907),i=r.n(l),s=r(23279),c=r.n(s),d=r(23493),u=r.n(d);function f(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function h(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function m(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return h(r.overflowY,t)||h(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function p(e,t,r,n,a,o,l,i){return o<e&&l>t||o>e&&l<t?0:o<=e&&i<=r||l>=t&&i>=r?o-e-n:l>t&&i<r||o<e&&i>r?l-t+a:0}var v=function(e,t){var r=window,n=t.scrollMode,a=t.block,o=t.inline,l=t.boundary,i=t.skipOverflowHiddenElements,s="function"==typeof l?l:function(e){return e!==l};if(!f(e))throw new TypeError("Invalid target");for(var c,d,u=document.scrollingElement||document.documentElement,h=[],v=e;f(v)&&s(v);){if((v=null==(d=(c=v).parentElement)?c.getRootNode().host||null:d)===u){h.push(v);break}null!=v&&v===document.body&&m(v)&&!m(document.documentElement)||null!=v&&m(v,i)&&h.push(v)}for(var g=r.visualViewport?r.visualViewport.width:innerWidth,E=r.visualViewport?r.visualViewport.height:innerHeight,w=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),x=y.height,k=y.width,C=y.top,N=y.right,T=y.bottom,S=y.left,D="start"===a||"nearest"===a?C:"end"===a?T:C+x/2,O="center"===o?S+k/2:"end"===o?N:S,M=[],P=0;P<h.length;P++){var B=h[P],R=B.getBoundingClientRect(),L=R.height,F=R.width,_=R.top,j=R.right,$=R.bottom,A=R.left;if("if-needed"===n&&C>=0&&S>=0&&T<=E&&N<=g&&C>=_&&T<=$&&S>=A&&N<=j)return M;var W=getComputedStyle(B),z=parseInt(W.borderLeftWidth,10),H=parseInt(W.borderTopWidth,10),Z=parseInt(W.borderRightWidth,10),V=parseInt(W.borderBottomWidth,10),I=0,U=0,q="offsetWidth"in B?B.offsetWidth-B.clientWidth-z-Z:0,K="offsetHeight"in B?B.offsetHeight-B.clientHeight-H-V:0,J="offsetWidth"in B?0===B.offsetWidth?0:F/B.offsetWidth:0,Y="offsetHeight"in B?0===B.offsetHeight?0:L/B.offsetHeight:0;if(u===B)I="start"===a?D:"end"===a?D-E:"nearest"===a?p(b,b+E,E,H,V,b+D,b+D+x,x):D-E/2,U="start"===o?O:"center"===o?O-g/2:"end"===o?O-g:p(w,w+g,g,z,Z,w+O,w+O+k,k),I=Math.max(0,I+b),U=Math.max(0,U+w);else{I="start"===a?D-_-H:"end"===a?D-$+V+K:"nearest"===a?p(_,$,L,H,V+K,D,D+x,x):D-(_+L/2)+K/2,U="start"===o?O-A-z:"center"===o?O-(A+F/2)+q/2:"end"===o?O-j+Z+q:p(A,j,F,z,Z+q,O,O+k,k);var Q=B.scrollLeft,X=B.scrollTop;D+=X-(I=Math.max(0,Math.min(X+I/Y,B.scrollHeight-L/Y+K))),O+=Q-(U=Math.max(0,Math.min(Q+U/J,B.scrollWidth-F/J+q)))}M.push({el:B,top:I,left:U})}return M};function g(e){return e===Object(e)&&0!==Object.keys(e).length}const E=function(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(g(t)&&"function"==typeof t.behavior)return t.behavior(r?v(e,t):[]);if(r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:g(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,a=e.top,o=e.left;n.scroll&&r?n.scroll({top:a,left:o,behavior:t}):(n.scrollTop=a,n.scrollLeft=o)}))}(v(e,n),n.behavior)}};var w=r(59619),b=r(73935);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var k="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,C="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),N="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),T="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),S="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),D="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),O="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),M="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),P="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),B="undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent),R="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),L="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent),F=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),_=!M&&!D&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,j=F?n.useLayoutEffect:n.useEffect,$=e=>{var{isLast:t,leaf:r,parent:a,text:l}=e,i=ge(),s=ot.findPath(i,l),c=o.Path.parent(s);return i.isVoid(a)?n.createElement(W,{length:o.Node.string(a).length}):""!==r.text||a.children[a.children.length-1]!==l||i.isInline(a)||""!==o.Editor.string(i,c)?""===r.text?n.createElement(W,null):t&&"\n"===r.text.slice(-1)?n.createElement(A,{isTrailing:!0,text:r.text}):n.createElement(A,{text:r.text}):n.createElement(W,{isLineBreak:!0})},A=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,n.useRef)(null),o=()=>"".concat(null!=t?t:"").concat(r?"\n":"");return j((()=>{var e=o();a.current&&a.current.textContent!==e&&(a.current.textContent=e)})),a.current?n.createElement("span",{"data-slate-string":!0,ref:a}):n.createElement("span",{"data-slate-string":!0,ref:a},o())},W=e=>{var{length:t=0,isLineBreak:r=!1}=e;return n.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?n.createElement("br",null):null)},z=new WeakMap,H=new WeakMap,Z=new WeakMap,V=new WeakMap,I=new WeakMap,U=new WeakMap,q=new WeakMap,K=new WeakMap,J=new WeakMap,Y=new WeakMap,Q=new WeakMap,X=new WeakMap,G=new WeakMap,ee=new WeakMap,te=new WeakMap,re=Symbol("placeholder"),ne=e=>{var{leaf:t,isLast:r,text:a,parent:o,renderPlaceholder:l,renderLeaf:i=(e=>n.createElement(oe,Object.assign({},e)))}=e,s=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e=null==s?void 0:s.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}}),[s,t]);var c=n.createElement($,{isLast:r,leaf:t,parent:o,text:a});if(t[re]){var d={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:s}};c=n.createElement(n.Fragment,null,l(d),c)}return i({attributes:{"data-slate-leaf":!0},children:c,leaf:t,text:a})},ae=n.memo(ne,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&o.Text.equals(t.leaf,e.leaf)&&t.leaf[re]===e.leaf[re])),oe=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},le=["anchor","focus"],ie=["anchor","focus"],se=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((r=>t.hasOwnProperty(r)&&e[r]===t[r])),ce=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r],l=x(n,le),i=x(a,ie);if(!o.Range.equals(n,a)||n[re]!==a[re]||!se(l,i))return!1}return!0};function de(e){var t=(0,n.useRef)(0),r=(0,n.useRef)(null),[,a]=(0,n.useState)(0);return(0,n.useEffect)((()=>(te.set(e,(()=>{r.current||(r.current=requestAnimationFrame((()=>{a((e=>e+1)),r.current=null})),t.current++)})),()=>{te.delete(e)})),[e]),r.current&&(cancelAnimationFrame(r.current),r.current=null),t.current}var ue=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:l,renderLeaf:i,text:s}=e,c=ge(),d=(0,n.useRef)(null),u=o.Text.decorations(s,t),f=ot.findKey(c,s),h=[],m=0;m<u.length;m++){var p=u[m];h.push(n.createElement(ae,{isLast:r&&m===u.length-1,key:"".concat(f.id,"-").concat(m),renderPlaceholder:l,leaf:p,text:s,parent:a,renderLeaf:i}))}j((()=>{var e=K.get(c);d.current?(null==e||e.set(f,d.current),U.set(s,d.current),I.set(d.current,s)):(null==e||e.delete(f),U.delete(s))}));var v=N?de(s):void 0;return n.createElement("span",{"data-slate-node":"text",ref:d,key:v},h)},fe=n.memo(ue,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&ce(t.decorations,e.decorations))),he=e=>{var{decorations:t,element:r,renderElement:a=(e=>n.createElement(pe,Object.assign({},e))),renderPlaceholder:l,renderLeaf:s,selection:c}=e,d=(0,n.useRef)(null),u=ge(),f=De(),h=u.isInline(r),m=ot.findKey(u,r),p=ye({decorations:t,node:r,renderElement:a,renderPlaceholder:l,renderLeaf:s,selection:c}),v={"data-slate-node":"element",ref:d};if(h&&(v["data-slate-inline"]=!0),!h&&o.Editor.hasInlines(u,r)){var g=o.Node.string(r),E=i()(g);"rtl"===E&&(v.dir=E)}if(o.Editor.isVoid(u,r)){v["data-slate-void"]=!0,!f&&h&&(v.contentEditable=!1);var w=h?"span":"div",[[b]]=o.Node.texts(r);p=f?null:n.createElement(w,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},n.createElement(fe,{renderPlaceholder:l,decorations:[],isLast:!1,parent:r,text:b})),z.set(b,0),H.set(b,r)}j((()=>{var e=K.get(u);d.current?(null==e||e.set(m,d.current),U.set(r,d.current),I.set(d.current,r)):(null==e||e.delete(m),U.delete(r))}));var y=a({attributes:v,children:p,element:r});if(N){var x=de(r);return n.createElement(n.Fragment,{key:x},y)}return y},me=n.memo(he,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&ce(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&o.Range.equals(e.selection,t.selection)))),pe=e=>{var{attributes:t,children:r,element:a}=e,o=ge().isInline(a)?"span":"div";return n.createElement(o,Object.assign({},t,{style:{position:"relative"}}),r)},ve=(0,n.createContext)(null),ge=()=>{var e=(0,n.useContext)(ve);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Ee=(0,n.createContext)((()=>[])),we=(0,n.createContext)(!1),be=()=>(0,n.useContext)(we),ye=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:l,renderLeaf:i,selection:s}=e,c=(0,n.useContext)(Ee),d=ge(),u=ot.findPath(d,r),f=[],h=o.Element.isElement(r)&&!d.isInline(r)&&o.Editor.hasInlines(d,r),m=0;m<r.children.length;m++){var p=u.concat(m),v=r.children[m],g=ot.findKey(d,v),E=o.Editor.range(d,p),w=s&&o.Range.intersection(E,s),b=c([v,p]);for(var y of t){var x=o.Range.intersection(y,E);x&&b.push(x)}o.Element.isElement(v)?f.push(n.createElement(we.Provider,{key:"provider-".concat(g.id),value:!!w},n.createElement(me,{decorations:b,element:v,key:g.id,renderElement:a,renderPlaceholder:l,renderLeaf:i,selection:w}))):f.push(n.createElement(fe,{decorations:b,key:g.id,isLast:h&&m===r.children.length-1,parent:r,renderPlaceholder:l,renderLeaf:i,text:v})),z.set(v,m),H.set(v,r)}return f},xe={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ke={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Ce={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Ne=e=>{var t=xe[e],r=ke[e],n=Ce[e],a=t&&(0,w.TB)(t),o=r&&(0,w.TB)(r),l=n&&(0,w.TB)(n);return e=>!(!a||!a(e))||(!!(C&&o&&o(e))||!(C||!l||!l(e)))},Te={isBold:Ne("bold"),isCompose:Ne("compose"),isMoveBackward:Ne("moveBackward"),isMoveForward:Ne("moveForward"),isDeleteBackward:Ne("deleteBackward"),isDeleteForward:Ne("deleteForward"),isDeleteLineBackward:Ne("deleteLineBackward"),isDeleteLineForward:Ne("deleteLineForward"),isDeleteWordBackward:Ne("deleteWordBackward"),isDeleteWordForward:Ne("deleteWordForward"),isExtendBackward:Ne("extendBackward"),isExtendForward:Ne("extendForward"),isExtendLineBackward:Ne("extendLineBackward"),isExtendLineForward:Ne("extendLineForward"),isItalic:Ne("italic"),isMoveLineBackward:Ne("moveLineBackward"),isMoveLineForward:Ne("moveLineForward"),isMoveWordBackward:Ne("moveWordBackward"),isMoveWordForward:Ne("moveWordForward"),isRedo:Ne("redo"),isSplitBlock:Ne("splitBlock"),isTransposeCharacter:Ne("transposeCharacter"),isUndo:Ne("undo")},Se=(0,n.createContext)(!1),De=()=>(0,n.useContext)(Se),Oe=(0,n.createContext)(null),Me=()=>{var e=(0,n.useContext)(Oe);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var[t]=e;return t},Pe=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Be=e=>Re(e)&&1===e.nodeType,Re=e=>{var t=Pe(e);return!!t&&e instanceof t.Node},Le=e=>{var t=e&&e.anchorNode&&Pe(e.anchorNode);return!!t&&e instanceof t.Selection},Fe=e=>Re(e)&&3===e.nodeType,_e=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],l=t,i=!1,s=!1;(Re(n=o)&&8===n.nodeType||Be(o)&&0===o.childNodes.length||Be(o)&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)l>=a.length?(i=!0,l=t-1,r="backward"):l<0?(s=!0,l=t+1,r="forward"):(o=a[l],t=l,l+="forward"===r?1:-1);return[o,t]},je=(e,t,r)=>{var[n]=_e(e,t,r);return n},$e=e=>{var t="";if(Fe(e)&&e.nodeValue)return e.nodeValue;if(Be(e)){for(var r of Array.from(e.childNodes))t+=$e(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},Ae=/data-slate-fragment="(.+?)"/m,We=e=>{var t=e.getData("text/html"),[,r]=t.match(Ae)||[];return r},ze=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"];function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ve=e=>n.createElement(n.Fragment,null,ye(e)),Ie=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},Ue=()=>[],qe=(e,t)=>{if(!e.selection||e.selection&&o.Range.isCollapsed(e.selection)){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),E(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Ke=(e,t)=>Re(t)&&ot.hasDOMNode(e,t),Je=(e,t)=>Re(t)&&ot.hasDOMNode(e,t,{editable:!0}),Ye=(e,t)=>{if(J.get(e))return!1;var r=Ke(e,t)&&ot.toSlateNode(e,t);return o.Editor.isVoid(e,r)},Qe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},Xe=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented};function Ge(e,t){if(e===t)return null;var r=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length!==t.length?r:null}(e,t);if(null===r)return null;var n=function(e,t,r){for(var n=e.length,a=t.length,o=Math.min(n,a,r),l=0;l<o;l++)if(e.charAt(n-l-1)!==t.charAt(a-l-1))return l;return e.length!==t.length?o:null}(e,t,Math.min(e.length-r,t.length-r));return null===n?null:{start:r,end:n}}function et(e,t){return e.slice(t.start,e.length-t.end)}function tt(e,t){var r=ot.toSlateNode(e,t);if(o.Text.isText(r)){var n=r.text,a=t.textContent;if(a.endsWith("\n")&&(a=a.slice(0,a.length-1)),a!==n){var l=function(e,t){if(void 0===e||void 0===t)return null;var r=Ge(e,t);if(null==r)return null;var n=et(t,r),a=et(e,r);return{start:r.start,end:e.length-r.end,insertText:n,removeText:a}}(n,a);if(null!==l)return{text:l,path:ot.findPath(e,r)}}}}function rt(e,t,r){var{path:n,text:a}=r,l={anchor:{path:n,offset:a.start},focus:{path:n,offset:a.end}};if(!t||!o.Range.isCollapsed(t))return l;var{insertText:i,removeText:s}=a;if((1===i.length||1===s.length)&&o.Path.equals(t.anchor.path,n)){var[c]=Array.from(o.Editor.nodes(e,{at:t,match:o.Text.isText}));if(c){var[d]=c,{anchor:u}=t,f=d.text[u.offset-1],h=d.text[u.offset];if(1===i.length&&i===h)return t;if(1===s.length&&s===f)return{anchor:{path:n,offset:u.offset-1},focus:{path:n,offset:u.offset}}}}return l}var nt=0;class at{constructor(){this.id="".concat(nt++)}}var ot={getWindow(e){var t=Z.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=q.get(t);return r||(r=new at,q.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var a=H.get(n);if(null==a){if(o.Editor.isEditor(n))return r;break}var l=z.get(n);if(null==l)break;r.unshift(l),n=a}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var t=ot.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!Y.get(e),isReadOnly:e=>!!J.get(e),blur(e){var t=ot.toDOMNode(e,e),r=ot.findDocumentOrShadowRoot(e);Y.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=ot.toDOMNode(e,e),r=ot.findDocumentOrShadowRoot(e);Y.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){ot.toDOMNode(e,e);var{selection:t}=e,r=ot.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&o.Transforms.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=ot.toDOMNode(e,e);try{r=Be(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&!(r.closest("[data-slate-editor]")!==o||a&&!r.isContentEditable&&("boolean"!=typeof r.isContentEditable||r.closest('[contenteditable="false"]')!==o)&&!r.getAttribute("data-slate-zero-width"))},insertData(e,t){e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),setFragmentData(e,t,r){e.setFragmentData(t,r)},toDOMNode(e,t){var r=K.get(e),n=o.Editor.isEditor(t)?V.get(e):null==r?void 0:r.get(ot.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return n},toDOMPoint(e,t){var r,[n]=o.Editor.node(e,t.path),a=ot.toDOMNode(e,n);o.Editor.void(e,{at:t})&&(t={path:t.path,offset:0});var l=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0;for(var s of l){var c=s.childNodes[0];if(null!=c&&null!=c.textContent){var{length:d}=c.textContent,u=s.getAttribute("data-slate-length"),f=i+(null==u?d:parseInt(u,10));if(t.offset<=f){r=[c,Math.min(d,Math.max(0,t.offset-i))];break}i=f}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,a=o.Range.isBackward(t),l=ot.toDOMPoint(e,r),i=o.Range.isCollapsed(t)?l:ot.toDOMPoint(e,n),s=ot.getWindow(e).document.createRange(),[c,d]=a?i:l,[u,f]=a?l:i,h=!!(Be(c)?c:c.parentElement).getAttribute("data-slate-zero-width"),m=!!(Be(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return s.setStart(c,h?1:d),s.setEnd(u,m?1:f),s},toSlateNode(e,t){var r=Be(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?I.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var l,i=ot.toSlateNode(e,t.target),s=ot.findPath(e,i);if(o.Editor.isVoid(e,i)){var c=a.getBoundingClientRect(),d=e.isInline(i)?r-c.left<c.left+c.width-r:n-c.top<c.top+c.height-n,u=o.Editor.point(e,s,{edge:d?"start":"end"}),f=d?o.Editor.before(e,u):o.Editor.after(e,u);if(f)return o.Editor.range(e,f)}var{document:h}=ot.getWindow(e);if(h.caretRangeFromPoint)l=h.caretRangeFromPoint(r,n);else{var m=h.caretPositionFromPoint(r,n);m&&((l=h.createRange()).setStart(m.offsetNode,m.offset),l.setEnd(m.offsetNode,m.offset))}if(!l)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return ot.toSlateRange(e,l,{exactMatch:!1,suppressThrow:!1})},toSlatePoint(e,t,r){var{exactMatch:n,suppressThrow:a}=r,[o,l]=n?t:(e=>{var[t,r]=e;if(Be(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=_e(t,a,n?"backward":"forward"),n=a<r;Be(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=je(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),i=o.parentNode,s=null,c=0;if(i){var d,u=i.closest('[data-slate-void="true"]'),f=i.closest("[data-slate-leaf]"),h=null;if(f){if(s=f.closest('[data-slate-node="text"]')){var m=ot.getWindow(e).document.createRange();m.setStart(s,0),m.setEnd(o,l);var p=m.cloneContents();[...Array.prototype.slice.call(p.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(p.querySelectorAll("[contenteditable=false]"))].forEach((e=>{e.parentNode.removeChild(e)})),c=p.textContent.length,h=s}}else u&&((f=u.querySelector("[data-slate-leaf]"))?(s=f.closest('[data-slate-node="text"]'),c=(h=f).textContent.length,h.querySelectorAll("[data-slate-zero-width]").forEach((e=>{c-=e.textContent.length}))):c=1);h&&c===h.textContent.length&&(i.hasAttribute("data-slate-zero-width")||T&&null!==(d=h.textContent)&&void 0!==d&&d.endsWith("\n\n"))&&c--}if(!s){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var v=ot.toSlateNode(e,s);return{path:ot.findPath(e,v),offset:c}},toSlateRange(e,t,r){var n,a,l,i,s,{exactMatch:c,suppressThrow:d}=r;if((Le(t)?t.anchorNode:t.startContainer)&&(Le(t)?(n=t.anchorNode,a=t.anchorOffset,l=t.focusNode,i=t.focusOffset,s=O&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(n=t.startContainer,a=t.startOffset,l=t.endContainer,i=t.endOffset,s=t.collapsed)),null==n||null==l||null==a||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var u=ot.toSlatePoint(e,[n,a],{exactMatch:c,suppressThrow:d});if(!u)return null;var f=s?u:ot.toSlatePoint(e,[l,i],{exactMatch:c,suppressThrow:d});if(!f)return null;var h={anchor:u,focus:f};return o.Range.isExpanded(h)&&o.Range.isForward(h)&&Be(l)&&o.Editor.void(e,{at:h.focus,mode:"highest"})&&(h=o.Editor.unhangRange(e,h,{voids:!0})),h},hasRange(e,t){var{anchor:r,focus:n}=t;return o.Editor.hasPath(e,r.path)&&o.Editor.hasPath(e,n.path)}};class lt{constructor(e,t){this.editor=e,this.restoreDOM=t,this.flush=e=>{try{this.reconcileMutations(e)}catch(e){console.error(e),this.restoreDOM()}},this.reconcileMutations=e=>{var t=function(e,t){var r=[],n=[],a=[],l=[];return t.forEach((t=>{switch(t.type){case"childList":t.addedNodes.length&&t.addedNodes.forEach((e=>{r.push(e)})),t.removedNodes.forEach((e=>{n.push(e)}));break;case"characterData":l.push(t);var{parentNode:i}=t.target;if(!i)return;var s=tt(e,i);if(!s)return;if(a.some((e=>{var{path:t}=e;return o.Path.equals(t,s.path)})))return;a.push(s)}})),{addedNodes:r,removedNodes:n,insertedText:a,characterDataMutations:l}}(this.editor,e),{insertedText:r,removedNodes:n}=t;if(((e,t)=>{var{selection:r}=e,{removedNodes:n}=t;return!!r&&o.Range.isExpanded(r)&&n.length>0})(this.editor,t)){var a=function(e){return e.reduce(((e,t)=>{var{text:r}=t;return"".concat(e).concat(r.insertText)}),"")}(r);this.replaceExpandedSelection(a)}else((e,t)=>{var{addedNodes:r}=t,{selection:n}=e,a=n?o.Node.parent(e,n.anchor.path):null,l=a?ot.toDOMNode(e,a):null;return!!l&&r.some((e=>e instanceof HTMLElement&&e.tagName===(null==l?void 0:l.tagName)))})(this.editor,t)?this.insertBreak():((e,t)=>{var{addedNodes:r,characterDataMutations:n,removedNodes:a}=t;return a.length>0&&0===r.length&&n.length>0})(this.editor,t)?this.removeLeafNodes(n):((e,t)=>{var{removedNodes:r}=t;return r.length>0})(this.editor,t)?this.deleteBackward():((e,t)=>{var{insertedText:r}=t;return r.length>0})(this.editor,t)&&this.insertText(r)},this.insertText=e=>{var{selection:t}=this.editor;if(Q.get(this.editor)||X.get(this.editor))return G.set(this.editor,e),void X.set(this.editor,!1);e.forEach((e=>{var r=e.text.insertText,n=rt(this.editor,t,e);o.Transforms.setSelection(this.editor,n),o.Editor.insertText(this.editor,r)}))},this.insertBreak=()=>{var{selection:e}=this.editor;o.Editor.insertBreak(this.editor),this.restoreDOM(),e&&setTimeout((()=>{this.editor.selection&&o.Range.equals(e,this.editor.selection)&&o.Transforms.move(this.editor)}),100)},this.replaceExpandedSelection=e=>{o.Editor.deleteFragment(this.editor),e.length&&o.Editor.insertText(this.editor,e),this.restoreDOM()},this.deleteBackward=()=>{o.Editor.deleteBackward(this.editor),ot.focus(this.editor),this.restoreDOM()},this.removeLeafNodes=e=>{for(var t of e){var r=ot.toSlateNode(this.editor,t);if(r){var n=ot.findPath(this.editor,r);o.Transforms.delete(this.editor,{at:n}),this.restoreDOM()}}},this.editor=e,this.restoreDOM=t}}function it(e,t,r){var[a]=(0,n.useState)((()=>new MutationObserver(t)));j((()=>{a.disconnect()})),(0,n.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),a.disconnect.bind(a)}))}var st={childList:!0,characterData:!0,subtree:!0};function ct(e){var t,r=Be(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r&&I.get(r);return n||(null!==(t=r)&&void 0!==t&&t.parentElement?ct(r.parentElement):null)}function dt(e,t){var r=ge(),a=(0,n.useRef)(new Set);it(e,(0,n.useCallback)((e=>{t.current&&e.forEach((e=>{var{target:t}=e,r=ct(t);if(r)return a.current.add(r)}))}),[]),st),a.current.clear();var l=(0,n.useCallback)((()=>{var e=Array.from(a.current.values()),t=e.filter((t=>!e.some((e=>o.Path.isParent(ot.findPath(r,e),ot.findPath(r,t))))));t.forEach((e=>{var t;null===(t=te.get(e))||void 0===t||t()})),a.current.clear()}),[]);return l}var ut={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function ft(e){var t=ge(),{receivedUserInput:r,onUserInput:a}=function(){var e=ge(),t=(0,n.useRef)(!1),r=(0,n.useRef)(null),a=(0,n.useCallback)((()=>{if(!1===t.current){var n=ot.getWindow(e);t.current=!0,r.current&&n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1,r.current=null}))}}),[]);return(0,n.useEffect)((()=>{t.current&&(t.current=!1)})),{receivedUserInput:t,onUserInput:a}}(),o=dt(e,r),l=(0,n.useMemo)((()=>new lt(t,o)),[o,t]),i=(0,n.useRef)(null),s=(0,n.useRef)(!1);return it(e,(0,n.useCallback)((e=>{r.current&&(s.current=!0,l.flush(e),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{s.current=!1,i.current=null}),250))}),[]),ut),{isReconciling:s,onUserInput:a}}var ht=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"];function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vt=(0,n.createContext)(!1),gt=()=>(0,n.useContext)(vt),Et=["editor","children","onChange","value"],wt=e=>{var{editor:t,children:r,onChange:a,value:l}=e,i=x(e,Et),s=(0,n.useRef)(!1),[c,d]=n.useState((()=>{if(!o.Node.isNodeList(l))throw new Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(JSON.stringify(l)));if(!o.Editor.isEditor(t))throw new Error("[Slate] editor is invalid! you passed:"+"".concat(JSON.stringify(t)));return t.children=l,Object.assign(t,i),[t]})),u=(0,n.useCallback)((()=>{a(t.children),d([t])}),[a]);ee.set(t,u),(0,n.useEffect)((()=>()=>{ee.set(t,(()=>{})),s.current=!0}),[]);var[f,h]=(0,n.useState)(ot.isFocused(t));return(0,n.useEffect)((()=>{h(ot.isFocused(t))})),j((()=>{var e=()=>{setTimeout((()=>{s.current||h(ot.isFocused(t))}),0)};return document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)}}),[]),n.createElement(Oe.Provider,{value:c},n.createElement(ve.Provider,{value:t},n.createElement(vt.Provider,{value:f},r)))},bt=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},yt=(e,t,r)=>{var n=ot.toDOMRange(e,t).getBoundingClientRect(),a=ot.toDOMRange(e,r).getBoundingClientRect();return bt(n,a)&&bt(a,n)},xt=e=>{var t=e,{apply:r,onChange:n,deleteBackward:a}=t;return K.set(t,new WeakMap),t.deleteBackward=r=>{if("line"!==r)return a(r);if(e.selection&&o.Range.isCollapsed(e.selection)){var n=o.Editor.above(e,{match:t=>o.Editor.isBlock(e,t),at:e.selection});if(n){var[,l]=n,i=o.Editor.range(e,l,e.selection.anchor),s=((e,t)=>{var r=o.Editor.range(e,o.Range.end(t)),n=Array.from(o.Editor.positions(e,{at:t})),a=0,l=n.length,i=Math.floor(l/2);if(yt(e,o.Editor.range(e,n[a]),r))return o.Editor.range(e,n[a],r);if(n.length<2)return o.Editor.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)yt(e,o.Editor.range(e,n[i]),r)?l=i:a=i,i=Math.floor((a+l)/2);return o.Editor.range(e,n[l],r)})(t,i);o.Range.isCollapsed(s)||o.Transforms.delete(e,{at:s})}}},t.apply=e=>{var n=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[a,l]of o.Editor.levels(t,{at:e.path})){var i=ot.findKey(t,a);n.push([l,i])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[s,c]of o.Editor.levels(t,{at:o.Path.parent(e.path)})){var d=ot.findKey(t,s);n.push([c,d])}break;case"move_node":for(var[u,f]of o.Editor.levels(t,{at:o.Path.common(o.Path.parent(e.path),o.Path.parent(e.newPath))})){var h=ot.findKey(t,u);n.push([f,h])}}for(var[m,p]of(r(e),n)){var[v]=o.Editor.node(t,m);q.set(v,p)}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,a]=o.Range.edges(r),l=o.Editor.void(t,{at:n.path}),i=o.Editor.void(t,{at:a.path});if(!o.Range.isCollapsed(r)||l){var s=ot.toDOMRange(t,r),c=s.cloneContents(),d=c.childNodes[0];if(c.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(d=e)})),i){var[u]=i,f=s.cloneRange(),h=ot.toDOMNode(t,u);f.setEndAfter(h),c=f.cloneContents()}if(l&&(d=c.querySelector("[data-slate-spacer]")),Array.from(c.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),Fe(d)){var m=d.ownerDocument.createElement("span");m.style.whiteSpace="pre",m.appendChild(d),c.appendChild(m),d=m}var p=t.getFragment(),v=JSON.stringify(p),g=window.btoa(encodeURIComponent(v));d.setAttribute("data-slate-fragment",g),e.setData("application/x-slate-fragment",g);var E=c.ownerDocument.createElement("div");return E.appendChild(c),E.setAttribute("hidden","true"),c.ownerDocument.body.appendChild(E),e.setData("text/html",E.innerHTML),e.setData("text/plain",$e(E)),c.ownerDocument.body.removeChild(E),e}}},t.insertData=e=>{t.insertFragmentData(e)||t.insertTextData(e)},t.insertFragmentData=e=>{var r=e.getData("application/x-slate-fragment")||We(e);if(r){var n=decodeURIComponent(window.atob(r)),a=JSON.parse(n);return t.insertFragment(a),!0}return!1},t.insertTextData=e=>{var r=e.getData("text/plain");if(r){var n=r.split(/\r\n|\r|\n/),a=!1;for(var l of n)a&&o.Transforms.splitNodes(t,{always:!0}),t.insertText(l),a=!0;return!0}return!1},t.onChange=()=>{b.unstable_batchedUpdates((()=>{var e=ee.get(t);e&&e(),n()}))},t},kt=N?e=>{var{autoFocus:t,decorate:r=Ue,onDOMBeforeInput:a,placeholder:l,readOnly:i=!1,renderElement:s,renderLeaf:d,renderPlaceholder:f=(e=>n.createElement(Ie,Object.assign({},e))),style:h={},as:m="div"}=e,p=x(e,ht),v=Me(),[g,w]=(0,n.useState)(!1),b=(0,n.useRef)(null),y=ft(b);J.set(v,i);var k=(0,n.useMemo)((()=>({isComposing:!1,isUpdatingSelection:!1,latestElement:null})),[]),C=de(v);j((()=>{var e;b.current&&(e=Pe(b.current))?(Z.set(v,e),V.set(v,b.current),U.set(v,b.current),I.set(b.current,v)):U.delete(v);try{var{selection:t}=v,r=ot.findDocumentOrShadowRoot(v).getSelection();if(k.isComposing||!r||!ot.isFocused(v))return;var n="None"!==r.type;if(!t&&!n)return;var a=V.get(v),l=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(l=!0),n&&l&&t){var i=ot.toSlateRange(v,r,{exactMatch:!0,suppressThrow:!0});if(i&&o.Range.equals(i,t))return}if(t&&!ot.hasRange(v,t))return void(v.selection=ot.toSlateRange(v,r,{exactMatch:!1,suppressThrow:!1}));var s=ot.toDOMNode(v,v);k.isUpdatingSelection=!0;var c=t&&ot.toDOMRange(v,t);if(c){o.Range.isBackward(t)?r.setBaseAndExtent(c.endContainer,c.endOffset,c.startContainer,c.startOffset):r.setBaseAndExtent(c.startContainer,c.startOffset,c.endContainer,c.endOffset);var d=c.startContainer.parentElement;d.getBoundingClientRect=c.getBoundingClientRect.bind(c),E(d,{scrollMode:"if-needed",boundary:s}),delete d.getBoundingClientRect}else r.removeAllRanges();setTimeout((()=>{k.isUpdatingSelection=!1}))}catch(e){k.isUpdatingSelection=!1}})),(0,n.useEffect)((()=>{b.current&&t&&b.current.focus()}),[t]);var N=(0,n.useCallback)(u()((()=>{try{if(!k.isComposing&&!k.isUpdatingSelection&&!y.isReconciling.current){var e=ot.findDocumentOrShadowRoot(v),{activeElement:t}=e,r=ot.toDOMNode(v,v),n=e.getSelection();if(t===r?(k.latestElement=t,Y.set(v,!0)):Y.delete(v),!n)return o.Transforms.deselect(v);var{anchorNode:a,focusNode:l}=n,i=Je(v,a)||Ye(v,a),s=Je(v,l)||Ye(v,l);if(i&&s){var c=ot.toSlateRange(v,n,{exactMatch:!1,suppressThrow:!1});o.Transforms.select(v,c)}else o.Transforms.deselect(v)}}catch(e){}}),100),[i]),T=(0,n.useMemo)((()=>c()(N,0)),[N]),S=(0,n.useCallback)((e=>{i||!Je(v,e.target)||Xe(e,a)||(T.flush(),y.onUserInput())}),[i,a]);j((()=>{var e=b.current;return null==e||e.addEventListener("beforeinput",S),()=>null==e?void 0:e.removeEventListener("beforeinput",S)}),[C,a]),j((()=>{var e=ot.getWindow(v);return e.document.addEventListener("selectionchange",T),()=>{e.document.removeEventListener("selectionchange",T)}}),[T]);var D=r([v,[]]);if(l&&1===v.children.length&&1===Array.from(o.Node.texts(v)).length&&""===o.Node.string(v)&&!g){var O=o.Editor.start(v,[]);D.push({[re]:!0,placeholder:l,anchor:O,focus:O})}return n.createElement(Se.Provider,{value:i},n.createElement(Ee.Provider,{value:r},n.createElement(m,Object.assign({key:C,role:i?void 0:"textbox"},p,{spellCheck:p.spellCheck,autoCorrect:p.autoCorrect,autoCapitalize:p.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i||void 0,suppressContentEditableWarning:!0,ref:b,style:pt({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},h),onCopy:(0,n.useCallback)((e=>{Je(v,e.target)&&!Qe(e,p.onCopy)&&(e.preventDefault(),ot.setFragmentData(v,e.clipboardData,"copy"))}),[p.onCopy]),onCut:(0,n.useCallback)((e=>{if(!i&&Je(v,e.target)&&!Qe(e,p.onCut)){e.preventDefault(),ot.setFragmentData(v,e.clipboardData,"cut");var{selection:t}=v;if(t)if(o.Range.isExpanded(t))o.Editor.deleteFragment(v);else{var r=o.Node.parent(v,t.anchor.path);o.Editor.isVoid(v,r)&&o.Transforms.delete(v)}}}),[i,p.onCut]),onFocus:(0,n.useCallback)((e=>{if(!i&&!k.isUpdatingSelection&&Je(v,e.target)&&!Qe(e,p.onFocus)){var t=ot.findDocumentOrShadowRoot(v);k.latestElement=t.activeElement,Y.set(v,!0)}}),[i,p.onFocus]),onBlur:(0,n.useCallback)((e=>{if(!i&&!k.isUpdatingSelection&&Je(v,e.target)&&!Qe(e,p.onBlur)){var t=ot.findDocumentOrShadowRoot(v);if(k.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===ot.toDOMNode(v,v)||Be(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&Re(r)&&ot.hasDOMNode(v,r)){var n=ot.toSlateNode(v,r);if(o.Element.isElement(n)&&!v.isVoid(n))return}Y.delete(v)}}}}),[i,p.onBlur]),onClick:(0,n.useCallback)((e=>{if(!i&&Ke(v,e.target)&&!Qe(e,p.onClick)&&Re(e.target)){var t=ot.toSlateNode(v,e.target),r=ot.findPath(v,t);if(o.Editor.hasPath(v,r))if(o.Node.get(v,r)===t){var n=o.Editor.start(v,r),a=o.Editor.end(v,r),l=o.Editor.void(v,{at:n}),s=o.Editor.void(v,{at:a});if(l&&s&&o.Path.equals(l[1],s[1])){var c=o.Editor.range(v,n);o.Transforms.select(v,c)}}}}),[i,p.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{Je(v,e.target)&&!Qe(e,p.onCompositionEnd)&&(T.flush(),setTimeout((()=>{k.isComposing&&w(!1),k.isComposing=!1,Q.set(v,!1),X.set(v,!0);var e=G.get(v)||[];if(e.length){G.set(v,[]);var{selection:t}=v;e.forEach((e=>{var r=e.text.insertText,n=rt(v,t,e);o.Transforms.setSelection(v,n),o.Editor.insertText(v,r)}))}}),20))}),[p.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{Je(v,e.target)&&!Qe(e,p.onCompositionUpdate)&&(!k.isComposing&&w(!0),k.isComposing=!0,Q.set(v,!0))}),[p.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{Je(v,e.target)&&!Qe(e,p.onCompositionStart)&&(!k.isComposing&&w(!0),k.isComposing=!0,Q.set(v,!0))}),[p.onCompositionStart]),onPaste:(0,n.useCallback)((e=>{e.clipboardData=(e=>{if(!e.getData("application/x-slate-fragment")){var t=We(e);if(t){var r=new DataTransfer;return e.types.forEach((t=>{r.setData(t,e.getData(t))})),r.setData("application/x-slate-fragment",t),r}}return e})(e.clipboardData),!Je(v,e.target)||Qe(e,p.onPaste)||i||(e.preventDefault(),ot.insertData(v,e.clipboardData))}),[i,p.onPaste])}),ye({decorations:D,node:v,renderElement:s,renderPlaceholder:f,renderLeaf:d,selection:v.selection}))))}:e=>{var{autoFocus:t,decorate:r=Ue,onDOMBeforeInput:a,placeholder:l,readOnly:s=!1,renderElement:d,renderLeaf:f,renderPlaceholder:h=(e=>n.createElement(Ie,Object.assign({},e))),scrollSelectionIntoView:m=qe,style:p={},as:v="div"}=e,g=x(e,ze),E=Me(),[w,b]=(0,n.useState)(!1),y=(0,n.useRef)(null),C=(0,n.useRef)([]);J.set(E,s);var N=(0,n.useMemo)((()=>({isComposing:!1,hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null})),[]);j((()=>{var e;y.current&&(e=Pe(y.current))?(Z.set(E,e),V.set(E,y.current),U.set(E,y.current),I.set(y.current,E)):U.delete(E);var{selection:t}=E,r=ot.findDocumentOrShadowRoot(E).getSelection();if(!N.isComposing&&r&&ot.isFocused(E)){var n="None"!==r.type;if(t||n){var a=V.get(E),l=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(l=!0),n&&l&&t){var i=ot.toSlateRange(E,r,{exactMatch:!0,suppressThrow:!0});if(i&&o.Range.equals(i,t))return}if(!t||ot.hasRange(E,t)){N.isUpdatingSelection=!0;var s=t&&ot.toDOMRange(E,t);s?(o.Range.isBackward(t)?r.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):r.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset),m(E,s)):r.removeAllRanges(),setTimeout((()=>{s&&T&&ot.toDOMNode(E,E).focus();N.isUpdatingSelection=!1}))}else E.selection=ot.toSlateRange(E,r,{exactMatch:!1,suppressThrow:!1})}}})),(0,n.useEffect)((()=>{y.current&&t&&y.current.focus()}),[t]);var D=(0,n.useCallback)(u()((()=>{if(!N.isComposing&&!N.isUpdatingSelection&&!N.isDraggingInternally){var e=ot.findDocumentOrShadowRoot(E),{activeElement:t}=e,r=ot.toDOMNode(E,E),n=e.getSelection();if(t===r?(N.latestElement=t,Y.set(E,!0)):Y.delete(E),!n)return o.Transforms.deselect(E);var{anchorNode:a,focusNode:l}=n,i=Je(E,a)||Ye(E,a),s=Je(E,l)||Ye(E,l);if(i&&s){var c=ot.toSlateRange(E,n,{exactMatch:!1,suppressThrow:!1});o.Transforms.select(E,c)}}}),100),[s]),M=(0,n.useMemo)((()=>c()(D,0)),[D]),$=(0,n.useCallback)((e=>{if(!s&&Je(E,e.target)&&!Xe(e,a)){M.flush(),D.flush();var{selection:t}=E,{inputType:r}=e,n=e.dataTransfer||e.data||void 0;if("insertCompositionText"===r||"deleteCompositionText"===r)return;var l=!1;if("insertText"===r&&t&&o.Range.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){l=!0,E.marks&&(l=!1);var{anchor:i}=t,c=o.Editor.above(E,{at:i,match:e=>o.Editor.isInline(E,e),mode:"highest"});if(c){var[,d]=c;o.Editor.isEnd(E,t.anchor,d)&&(l=!1)}}if(l||e.preventDefault(),!r.startsWith("delete")||r.startsWith("deleteBy")){var[u]=e.getTargetRanges();if(u){var f=ot.toSlateRange(E,u,{exactMatch:!1,suppressThrow:!1});t&&o.Range.equals(t,f)||o.Transforms.select(E,f)}}if(t&&o.Range.isExpanded(t)&&r.startsWith("delete")){var h=r.endsWith("Backward")?"backward":"forward";return void o.Editor.deleteFragment(E,{direction:h})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":o.Editor.deleteFragment(E);break;case"deleteContent":case"deleteContentForward":o.Editor.deleteForward(E);break;case"deleteContentBackward":o.Editor.deleteBackward(E);break;case"deleteEntireSoftLine":o.Editor.deleteBackward(E,{unit:"line"}),o.Editor.deleteForward(E,{unit:"line"});break;case"deleteHardLineBackward":o.Editor.deleteBackward(E,{unit:"block"});break;case"deleteSoftLineBackward":o.Editor.deleteBackward(E,{unit:"line"});break;case"deleteHardLineForward":o.Editor.deleteForward(E,{unit:"block"});break;case"deleteSoftLineForward":o.Editor.deleteForward(E,{unit:"line"});break;case"deleteWordBackward":o.Editor.deleteBackward(E,{unit:"word"});break;case"deleteWordForward":o.Editor.deleteForward(E,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":o.Editor.insertBreak(E);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&(N.isComposing&&b(!1),N.isComposing=!1),"DataTransfer"===(null==n?void 0:n.constructor.name)?ot.insertData(E,n):"string"==typeof n&&(l?C.current.push((()=>o.Editor.insertText(E,n))):o.Editor.insertText(E,n))}}}),[s,a]);j((()=>(y.current&&_&&y.current.addEventListener("beforeinput",$),()=>{y.current&&_&&y.current.removeEventListener("beforeinput",$)})),[$]),j((()=>{var e=ot.getWindow(E);return e.document.addEventListener("selectionchange",M),()=>{e.document.removeEventListener("selectionchange",M)}}),[M]);var A=r([E,[]]);if(l&&1===E.children.length&&1===Array.from(o.Node.texts(E)).length&&""===o.Node.string(E)&&!w){var W=o.Editor.start(E,[]);A.push({[re]:!0,placeholder:l,anchor:W,focus:W})}return n.createElement(Se.Provider,{value:s},n.createElement(Ee.Provider,{value:r},n.createElement(v,Object.assign({role:s?void 0:"textbox"},g,{spellCheck:!(!_&&F)&&g.spellCheck,autoCorrect:_||!F?g.autoCorrect:"false",autoCapitalize:_||!F?g.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:y,style:Ze({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},p),onBeforeInput:(0,n.useCallback)((e=>{if(!_&&!s&&!Qe(e,g.onBeforeInput)&&Je(E,e.target)&&(e.preventDefault(),!N.isComposing)){var t=e.data;o.Editor.insertText(E,t)}}),[s]),onInput:(0,n.useCallback)((e=>{for(var t of C.current)t();C.current=[]}),[]),onBlur:(0,n.useCallback)((e=>{if(!s&&!N.isUpdatingSelection&&Je(E,e.target)&&!Qe(e,g.onBlur)){var t=ot.findDocumentOrShadowRoot(E);if(N.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===ot.toDOMNode(E,E)||Be(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&Re(r)&&ot.hasDOMNode(E,r)){var n=ot.toSlateNode(E,r);if(o.Element.isElement(n)&&!E.isVoid(n))return}if(S){var a=t.getSelection();null==a||a.removeAllRanges()}Y.delete(E)}}}}),[s,g.onBlur]),onClick:(0,n.useCallback)((e=>{if(!s&&Ke(E,e.target)&&!Qe(e,g.onClick)&&Re(e.target)){var t=ot.toSlateNode(E,e.target),r=ot.findPath(E,t);if(o.Editor.hasPath(E,r))if(o.Node.get(E,r)===t){var n=o.Editor.start(E,r),a=o.Editor.end(E,r),l=o.Editor.void(E,{at:n}),i=o.Editor.void(E,{at:a});if(l&&i&&o.Path.equals(l[1],i[1])){var c=o.Editor.range(E,n);o.Transforms.select(E,c)}}}}),[s,g.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{if(Je(E,e.target)&&!Qe(e,g.onCompositionEnd)&&(N.isComposing&&b(!1),N.isComposing=!1,S||P||k||B||L||R||!e.data||o.Editor.insertText(E,e.data),E.selection&&o.Range.isCollapsed(E.selection))){var t=E.selection.anchor.path,r=o.Node.leaf(E,t);N.hasInsertPrefixInCompositon&&(N.hasInsertPrefixInCompositon=!1,o.Editor.withoutNormalizing(E,(()=>{var e=r.text.replace(/^\uFEFF/,"");o.Transforms.delete(E,{distance:r.text.length,reverse:!0}),o.Editor.insertText(E,e)})))}}),[g.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{Je(E,e.target)&&!Qe(e,g.onCompositionUpdate)&&(!N.isComposing&&b(!0),N.isComposing=!0)}),[g.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{if(Je(E,e.target)&&!Qe(e,g.onCompositionStart)){var{selection:t,marks:r}=E;if(t){if(o.Range.isExpanded(t))return void o.Editor.deleteFragment(E);var n=o.Editor.above(E,{match:e=>o.Editor.isInline(E,e),mode:"highest"});if(n){var[,a]=n;if(o.Editor.isEnd(E,t.anchor,a)){var l=o.Editor.after(E,a);o.Transforms.setSelection(E,{anchor:l,focus:l})}}r&&(N.hasInsertPrefixInCompositon=!0,o.Transforms.insertNodes(E,Ze({text:"\ufeff"},r),{select:!0}))}}}),[g.onCompositionStart]),onCopy:(0,n.useCallback)((e=>{Je(E,e.target)&&!Qe(e,g.onCopy)&&(e.preventDefault(),ot.setFragmentData(E,e.clipboardData,"copy"))}),[g.onCopy]),onCut:(0,n.useCallback)((e=>{if(!s&&Je(E,e.target)&&!Qe(e,g.onCut)){e.preventDefault(),ot.setFragmentData(E,e.clipboardData,"cut");var{selection:t}=E;if(t)if(o.Range.isExpanded(t))o.Editor.deleteFragment(E);else{var r=o.Node.parent(E,t.anchor.path);o.Editor.isVoid(E,r)&&o.Transforms.delete(E)}}}),[s,g.onCut]),onDragOver:(0,n.useCallback)((e=>{if(Ke(E,e.target)&&!Qe(e,g.onDragOver)){var t=ot.toSlateNode(E,e.target);o.Editor.isVoid(E,t)&&e.preventDefault()}}),[g.onDragOver]),onDragStart:(0,n.useCallback)((e=>{if(!s&&Ke(E,e.target)&&!Qe(e,g.onDragStart)){var t=ot.toSlateNode(E,e.target),r=ot.findPath(E,t);if(o.Editor.isVoid(E,t)||o.Editor.void(E,{at:r,voids:!0})){var n=o.Editor.range(E,r);o.Transforms.select(E,n)}N.isDraggingInternally=!0,ot.setFragmentData(E,e.dataTransfer,"drag")}}),[s,g.onDragStart]),onDrop:(0,n.useCallback)((e=>{if(!s&&Ke(E,e.target)&&!Qe(e,g.onDrop)){e.preventDefault();var t=E.selection,r=ot.findEventRange(E,e),n=e.dataTransfer;o.Transforms.select(E,r),N.isDraggingInternally&&(!t||o.Range.equals(t,r)||o.Editor.void(E,{at:r,voids:!0})||o.Transforms.delete(E,{at:t})),ot.insertData(E,n),ot.isFocused(E)||ot.focus(E)}N.isDraggingInternally=!1}),[s,g.onDrop]),onDragEnd:(0,n.useCallback)((e=>{!s&&N.isDraggingInternally&&g.onDragEnd&&Ke(E,e.target)&&g.onDragEnd(e),N.isDraggingInternally=!1}),[s,g.onDragEnd]),onFocus:(0,n.useCallback)((e=>{if(!s&&!N.isUpdatingSelection&&Je(E,e.target)&&!Qe(e,g.onFocus)){var t=ot.toDOMNode(E,E),r=ot.findDocumentOrShadowRoot(E);if(N.latestElement=r.activeElement,T&&e.target!==t)return void t.focus();Y.set(E,!0)}}),[s,g.onFocus]),onKeyDown:(0,n.useCallback)((e=>{if(!s&&!N.isComposing&&Je(E,e.target)&&!Qe(e,g.onKeyDown)){var{nativeEvent:t}=e,{selection:r}=E,n=E.children[null!==r?r.focus.path[0]:0],a="rtl"===i()(o.Node.string(n));if(Te.isRedo(t)){e.preventDefault();var l=E;return void("function"==typeof l.redo&&l.redo())}if(Te.isUndo(t)){e.preventDefault();var c=E;return void("function"==typeof c.undo&&c.undo())}if(Te.isMoveLineBackward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line",reverse:!0});if(Te.isMoveLineForward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line"});if(Te.isExtendLineBackward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line",edge:"focus",reverse:!0});if(Te.isExtendLineForward(t))return e.preventDefault(),void o.Transforms.move(E,{unit:"line",edge:"focus"});if(Te.isMoveBackward(t))return e.preventDefault(),void(r&&o.Range.isCollapsed(r)?o.Transforms.move(E,{reverse:!a}):o.Transforms.collapse(E,{edge:"start"}));if(Te.isMoveForward(t))return e.preventDefault(),void(r&&o.Range.isCollapsed(r)?o.Transforms.move(E,{reverse:a}):o.Transforms.collapse(E,{edge:"end"}));if(Te.isMoveWordBackward(t))return e.preventDefault(),r&&o.Range.isExpanded(r)&&o.Transforms.collapse(E,{edge:"focus"}),void o.Transforms.move(E,{unit:"word",reverse:!a});if(Te.isMoveWordForward(t))return e.preventDefault(),r&&o.Range.isExpanded(r)&&o.Transforms.collapse(E,{edge:"focus"}),void o.Transforms.move(E,{unit:"word",reverse:a});if(_){if((O||S)&&r&&(Te.isDeleteBackward(t)||Te.isDeleteForward(t))&&o.Range.isCollapsed(r)){var d=o.Node.parent(E,r.anchor.path);if(o.Element.isElement(d)&&o.Editor.isVoid(E,d)&&o.Editor.isInline(E,d))return e.preventDefault(),void o.Editor.deleteBackward(E,{unit:"block"})}}else{if(Te.isBold(t)||Te.isItalic(t)||Te.isTransposeCharacter(t))return void e.preventDefault();if(Te.isSplitBlock(t))return e.preventDefault(),void o.Editor.insertBreak(E);if(Te.isDeleteBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"backward"}):o.Editor.deleteBackward(E));if(Te.isDeleteForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"forward"}):o.Editor.deleteForward(E));if(Te.isDeleteLineBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"backward"}):o.Editor.deleteBackward(E,{unit:"line"}));if(Te.isDeleteLineForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"forward"}):o.Editor.deleteForward(E,{unit:"line"}));if(Te.isDeleteWordBackward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"backward"}):o.Editor.deleteBackward(E,{unit:"word"}));if(Te.isDeleteWordForward(t))return e.preventDefault(),void(r&&o.Range.isExpanded(r)?o.Editor.deleteFragment(E,{direction:"forward"}):o.Editor.deleteForward(E,{unit:"word"}))}}}),[s,g.onKeyDown]),onPaste:(0,n.useCallback)((e=>{s||!Je(E,e.target)||Qe(e,g.onPaste)||_&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||(e.preventDefault(),ot.insertData(E,e.clipboardData))}),[s,g.onPaste])}),n.createElement(Ve,{decorations:A,node:E,renderElement:d,renderPlaceholder:h,renderLeaf:f,selection:E.selection}))))},Ct=r(90111),Nt={isHistory:e=>(0,Ct.P)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||o.Operation.isOperationList(e.redos[0]))&&(0===e.undos.length||o.Operation.isOperationList(e.undos[0]))},Tt=(new WeakMap,new WeakMap),St=new WeakMap,Dt={isHistoryEditor:e=>Nt.isHistory(e.history)&&o.Editor.isEditor(e),isMerging:e=>St.get(e),isSaving:e=>Tt.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=Dt.isMerging(e);St.set(e,!1),t(),St.set(e,r)},withoutSaving(e,t){var r=Dt.isSaving(e);Tt.set(e,!1),t(),Tt.set(e,r)}},Ot=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!o.Path.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!o.Path.equals(e.path,t.path))),Mt=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,Pt=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),Bt=e=>"set_selection"!==e.type,Rt=r(26793),Lt=r(35193),Ft=r(48170),_t=r(90546),jt=r.n(_t),$t=r(953),At=r(90666);const Wt=(e,t)=>{const r=o.Editor.marks(e);return!!r&&!0===r[t]},zt=(e,t)=>{Wt(e,t)?o.Editor.removeMark(e,t):o.Editor.addMark(e,t,!0)};r(43318);const Ht="rich-text__button",Zt=({format:e,children:t})=>{const r=Me();return n.createElement("button",{type:"button",className:[Ht,Wt(r,e)&&`${Ht}__button--active`].filter(Boolean).join(" "),onMouseDown:t=>{t.preventDefault(),zt(r,e)}},t)},Vt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic bold-icon"},n.createElement("path",{className:"fill",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),It=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic inline-code-icon"},n.createElement("path",{className:"fill",d:"M7.375 16.781l1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 000 1.562l5 4zm9.25-9.562l-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 000-1.562l-5-4zM14.976 3.216l-4 18-1.953-.434 4-18z"})),Ut=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic italic-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"})),qt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic strikethrough-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})),Kt=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic underline-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})),Jt={bold:{Button:()=>n.createElement(Zt,{format:"bold"},n.createElement(Vt,null)),Leaf:({attributes:e,children:t})=>n.createElement("strong",{...e},t)},code:{Button:()=>n.createElement(Zt,{format:"code"},n.createElement(It,null)),Leaf:({attributes:e,children:t})=>n.createElement("code",{...e},t)},italic:{Button:()=>n.createElement(Zt,{format:"italic"},n.createElement(Ut,null)),Leaf:({attributes:e,children:t})=>n.createElement("em",{...e},t)},strikethrough:{Button:()=>n.createElement(Zt,{format:"strikethrough"},n.createElement(qt,null)),Leaf:({attributes:e,children:t})=>n.createElement("del",{...e},t)},underline:{Button:()=>n.createElement(Zt,{format:"underline"},n.createElement(Kt,null)),Leaf:({attributes:e,children:t})=>n.createElement("u",{...e},t)}},Yt=(e,t)=>{if(!e.selection)return!1;const[r]=Array.from(o.Editor.nodes(e,{at:o.Editor.unhangRange(e,e.selection),match:e=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&e.type===t}));return!!r},Qt=["ol","ul"],Xt=(e,t)=>{const r=Yt(e,t),n=Qt.includes(t);let a=t;if(r?a=void 0:n&&(a="li"),o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&Qt.includes(e.type),split:!0,mode:"lowest"}),o.Transforms.setNodes(e,{type:a}),!r&&n){const r={type:t,children:[]};o.Transforms.wrapNodes(e,r)}ot.focus(e)},Gt="rich-text__button",er=({format:e,children:t,onClick:r,className:a})=>{const o=Me(),l=(0,n.useCallback)((t=>{t.preventDefault(),Xt(o,e)}),[o,e]);return n.createElement("button",{type:"button",className:[Gt,a,Yt(o,e)&&`${Gt}__button--active`].filter(Boolean).join(" "),onClick:r||l},t)},tr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h1-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z"})),rr={Button:()=>n.createElement(er,{format:"h1"},n.createElement(tr,null)),Element:({attributes:e,children:t})=>n.createElement("h1",{...e},t)},nr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h2-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8a2 2 0 01-2 2h-2v2h4v2H9v-4a2 2 0 012-2h2V9H9V7h4a2 2 0 012 2v2z"})),ar={Button:()=>n.createElement(er,{format:"h2"},n.createElement(nr,null)),Element:({attributes:e,children:t})=>n.createElement("h2",{...e},t)},or=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h3-icon"},n.createElement("path",{fill:"none",d:"M.01 0h24v24h-24z"}),n.createElement("path",{className:"fill",d:"M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15a2 2 0 01-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4a2 2 0 012 2v1.5z"})),lr={Button:()=>n.createElement(er,{format:"h3"},n.createElement(or,null)),Element:({attributes:e,children:t})=>n.createElement("h3",{...e},t)},ir=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h4-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"})),sr={Button:()=>n.createElement(er,{format:"h4"},n.createElement(ir,null)),Element:({attributes:e,children:t})=>n.createElement("h4",{...e},t)},cr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h5-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2H9v-2h4v-2H9V7h6v2z"})),dr={Button:()=>n.createElement(er,{format:"h5"},n.createElement(cr,null)),Element:({attributes:e,children:t})=>n.createElement("h5",{...e},t)},ur=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h6-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V9a2 2 0 012-2h4v2z"})),fr={Button:()=>n.createElement(er,{format:"h6"},n.createElement(ur,null)),Element:({attributes:e,children:t})=>n.createElement("h6",{...e},t)},hr=e=>{o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&"link"===e.type})};var mr=r(71851);const pr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic link"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}));var vr=r(39599),gr=r(80181),Er=r(33636),wr=r(26644),br=r(46268),yr=r(92305),xr=r(5590);r(47086);const kr="rich-text-link-edit-modal",Cr=({close:e,handleModalSubmit:t,initialState:r,fieldSchema:a,modalSlug:o})=>{const{t:l}=(0,Rt.$)("fields");return n.createElement(mr.Modal,{slug:o,className:kr},n.createElement(vr.Z,{className:`${kr}__template`},n.createElement("header",{className:`${kr}__header`},n.createElement("h3",null,l("editLink")),n.createElement(gr.Z,{buttonStyle:"none",onClick:e},n.createElement(Er.Z,null))),n.createElement(wr.Z,{onSubmit:t,initialState:r},n.createElement(xr.Z,{fieldTypes:yr.Z,readOnly:!1,fieldSchema:a,forceRender:!0}),n.createElement(br.Z,null,l("general:submit")))))},Nr="rich-text-link-modal";var Tr=r(19826),Sr=r(28630),Dr=r(40684),Or=r(9980);const Mr=(0,r(78498).extractTranslations)(["fields:textToDisplay","fields:linkType","fields:chooseBetweenCustomTextOrDocument","fields:customURL","fields:internalLink","fields:enterURL","fields:chooseDocumentToLink","fields:openInNewTab"]),Pr=e=>[{name:"text",label:Mr["fields:textToDisplay"],type:"text",required:!0},{name:"linkType",label:Mr["fields:linkType"],type:"radio",required:!0,admin:{description:Mr["fields:chooseBetweenCustomTextOrDocument"]},defaultValue:"custom",options:[{label:Mr["fields:customURL"],value:"custom"},{label:Mr["fields:internalLink"],value:"internal"}]},{name:"url",label:Mr["fields:enterURL"],type:"text",required:!0,admin:{condition:({linkType:e,url:t})=>void 0===e&&t||"custom"===e}},{name:"doc",label:Mr["fields:chooseDocumentToLink"],type:"relationship",required:!0,relationTo:e.collections.map((({slug:e})=>e)),admin:{condition:({linkType:e})=>"internal"===e}},{name:"newTab",label:Mr["fields:openInNewTab"],type:"checkbox"}];var Br=r(56490);var Rr=r(89116),Lr=r(95050),Fr=r(93582),_r=r(28960);r(73404);const jr="rich-text-link",$r={Button:({fieldProps:e})=>{var t,r;const a=null===(r=null===(t=null==e?void 0:e.admin)||void 0===t?void 0:t.link)||void 0===r?void 0:r.fields,l=`${Nr}-${e.path}`,{t:i}=(0,Rt.$)(),s=(0,Or.Z)(),c=Me(),{user:d}=(0,Sr.a)(),u=(0,Dr.bU)(),{toggleModal:f}=(0,mr.useModal)(),[h,m]=(0,n.useState)(!1),[p,v]=(0,n.useState)({}),[g]=(0,n.useState)((()=>{const e=[...Pr(s)];return a&&e.push({name:"fields",type:"group",admin:{style:{margin:0,padding:0,borderTop:0,borderBottom:0}},fields:a}),e}));return n.createElement(n.Fragment,null,n.createElement(er,{format:"link",onClick:async()=>{if(Yt(c,"link"))hr(c);else{f(l),m(!0);if(!(c.selection&&o.Range.isCollapsed(c.selection))){const e={text:c.selection?o.Editor.string(c,c.selection):""},t=await(0,Tr.Z)({fieldSchema:g,data:e,user:d,operation:"create",locale:u,t:i});v(t)}}}},n.createElement(pr,null)),h&&n.createElement(Cr,{modalSlug:l,fieldSchema:g,initialState:p,close:()=>{f(l),m(!1)},handleModalSubmit:e=>{const t=c.selection&&o.Range.isCollapsed(c.selection),r=(0,Br.default)(e,!0),n={type:"link",linkType:r.linkType,url:r.url,doc:r.doc,newTab:r.newTab,fields:r.fields,children:[]};t||!c.selection?o.Transforms.insertNodes(c,{...n,children:[{text:String(r.text)}]}):c.selection&&(o.Transforms.wrapNodes(c,n,{split:!0}),o.Transforms.delete(c,{at:c.selection.focus.path,unit:"word"}),o.Transforms.move(c,{distance:1,unit:"offset"}),o.Transforms.insertText(c,String(r.text),{at:c.selection.focus.path})),f(l),m(!1),ot.focus(c)}}))},Element:({attributes:e,children:t,element:r,editorRef:a,fieldProps:l})=>{var i,s;const c=null===(s=null===(i=null==l?void 0:l.admin)||void 0===i?void 0:i.link)||void 0===s?void 0:s.fields,d=Me(),u=(0,Or.Z)(),{user:f}=(0,Sr.a)(),h=(0,Dr.bU)(),{t:m,i18n:p}=(0,Rt.$)("fields"),{openModal:v,toggleModal:g}=(0,mr.useModal)(),[E,w]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[x,k]=(0,n.useState)({}),[C]=(0,n.useState)((()=>{const e=[...Pr(u)];return c&&e.push({name:"fields",type:"group",admin:{style:{margin:0,padding:0,borderTop:0,borderBottom:0}},fields:c}),e})),N=`${Nr}-${l.path}`,T=(0,n.useCallback)((e=>{e||y(e)}),[]);return(0,n.useEffect)((()=>{(async()=>{const e={text:o.Node.string(r),linkType:r.linkType,url:r.url,doc:r.doc,newTab:r.newTab,fields:(0,Fr.Z)(r.fields)},t=await(0,Tr.Z)({fieldSchema:C,data:e,user:f,operation:"update",locale:h,t:m});k(t)})()}),[E,r,C,f,h,m]),n.createElement("span",{className:jr,...e},n.createElement("span",{style:{userSelect:"none"},contentEditable:!1},E&&n.createElement(Cr,{modalSlug:N,fieldSchema:C,close:()=>{g(N),w(!1)},handleModalSubmit:e=>{g(N),w(!1);const t=(0,Br.default)(e,!0),[,r]=o.Editor.above(d),n={newTab:t.newTab,url:t.url,linkType:t.linkType,doc:t.doc};c&&(n.fields=t.fields),o.Transforms.setNodes(d,n,{at:r}),o.Transforms.delete(d,{at:d.selection.focus.path,unit:"block"}),o.Transforms.move(d,{distance:1,unit:"offset"}),o.Transforms.insertText(d,String(t.text),{at:d.selection.focus.path}),ot.focus(d)},initialState:x}),n.createElement(Lr.Z,{buttonType:"none",size:"small",forceOpen:b,onToggleOpen:T,horizontalAlign:"left",verticalAlign:"bottom",boundingRef:a,render:()=>{var e,t,a,o;return n.createElement("div",{className:`${jr}__popup`},"internal"===r.linkType&&(null===(e=r.doc)||void 0===e?void 0:e.relationTo)&&(null===(t=r.doc)||void 0===t?void 0:t.value)&&n.createElement(Rr.c,{i18nKey:"fields:linkedTo",values:{label:(0,_r.i)(null===(o=null===(a=u.collections.find((({slug:e})=>e===r.doc.relationTo)))||void 0===a?void 0:a.labels)||void 0===o?void 0:o.singular,p)}},n.createElement("a",{className:`${jr}__link-label`,href:`${u.routes.admin}/collections/${r.doc.relationTo}/${r.doc.value}`,target:"_blank",rel:"noreferrer"},"label")),("custom"===r.linkType||!r.linkType)&&n.createElement("a",{className:`${jr}__link-label`,href:r.url,target:"_blank",rel:"noreferrer"},r.url),n.createElement(gr.Z,{className:`${jr}__link-edit`,icon:"edit",round:!0,buttonStyle:"icon-label",onClick:e=>{e.preventDefault(),y(!1),v(N),w(!0)},tooltip:m("general:edit")}),n.createElement(gr.Z,{className:`${jr}__link-close`,icon:"x",round:!0,buttonStyle:"icon-label",onClick:e=>{e.preventDefault(),hr(d)},tooltip:m("general:remove")}))}})),n.createElement("span",{tabIndex:0,role:"button",className:[`${jr}__button`].filter(Boolean).join(" "),onKeyDown:e=>{"Enter"===e.key&&y(!0)},onClick:()=>y(!0)},t))},plugins:[e=>{const t=e,{isInline:r}=t;return t.isInline=e=>"link"===e.type||r(e),t}]},Ar=$r,Wr=(e,t)=>{var r;let n;try{n=o.Editor.parent(e,e.selection)}catch(e){}if((null===(r=null==n?void 0:n[1])||void 0===r?void 0:r.length)>0){const r=o.Editor.above(e,{at:n[1]});return o.Element.isElement(r[0])&&r[0].type===t}return!1},zr="rich-text__button",Hr=({format:e,children:t,onClick:r,className:a})=>{const o=Me(),l=(0,n.useCallback)((t=>{t.preventDefault(),Xt(o,e)}),[o,e]);return n.createElement("button",{type:"button",className:[zr,a,Wr(o,e)&&`${zr}__button--active`].filter(Boolean).join(" "),onClick:r||l},t)},Zr=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic ordered-list-icon"},n.createElement("path",{className:"fill",d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}));r(99529);const Vr={Button:()=>n.createElement(Hr,{format:"ol"},n.createElement(Zr,null)),Element:({attributes:e,children:t})=>n.createElement("ol",{className:"rich-text-ol",...e},t)},Ir=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic unordered-list-icon"},n.createElement("path",{className:"fill",d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}));r(88767);const Ur={Button:()=>n.createElement(Hr,{format:"ul"},n.createElement(Ir,null)),Element:({attributes:e,children:t})=>n.createElement("ul",{className:"rich-text-ul",...e},t)},qr={Element:e=>{var t,r;const{attributes:a,element:o,children:l}=e,i=o.children.length>=1&&Qt.includes(null===(r=null===(t=o.children)||void 0===t?void 0:t[0])||void 0===r?void 0:r.type);return n.createElement("li",{style:{listStyle:i?"none":void 0},...a},l)}};r(30958);const Kr=()=>n.createElement("svg",{className:"icon icon--indent-left",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M16.005 9.61502L21.005 13.1864L21.005 6.04361L16.005 9.61502Z",className:"fill"}),n.createElement("rect",{x:"5",y:"5.68199",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"5",y:"11.4738",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"5",y:"17.2656",width:"16.005",height:"2.15625",className:"fill"}));r(73928);const Jr=()=>n.createElement("svg",{className:"icon icon--indent-right",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M10 9.61502L5 6.04361L5 13.1864L10 9.61502Z",className:"fill"}),n.createElement("rect",{x:"11.9375",y:"5.68199",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"11.9375",y:"11.4738",width:"9.0675",height:"2.15625",className:"fill"}),n.createElement("rect",{x:"5",y:"17.2656",width:"16.005",height:"2.15625",className:"fill"})),Yr="indent",Qr={Button:()=>{const e=Me(),t=(0,n.useCallback)(((t,r)=>{if(t.preventDefault(),"left"===r&&(o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&[Yr,...Qt].includes(e.type),split:!0,mode:"lowest"}),Yt(e,"li"))){const[,t]=o.Editor.parent(e,e.selection),[,r]=t;r>0||0===r?o.Transforms.unwrapNodes(e,{match:e=>o.Element.isElement(e)&&"li"===e.type,split:!0,mode:"lowest"}):o.Transforms.unsetNodes(e,["type"])}if("right"===r){const t=Yt(e,"ol"),r=Yt(e,"ul");t||r?(o.Transforms.wrapNodes(e,{type:"li",children:[]}),o.Transforms.wrapNodes(e,{type:t?"ol":"ul",children:[{text:" "}]}),o.Transforms.setNodes(e,{type:"li"})):o.Transforms.wrapNodes(e,{type:Yr,children:[]})}ot.focus(e)}),[e]),r=Yt(e,"li")||Yt(e,Yr);return n.createElement(n.Fragment,null,n.createElement("button",{type:"button",className:[Gt,!r&&`${Gt}--disabled`].filter(Boolean).join(" "),onClick:r?e=>t(e,"left"):void 0},n.createElement(Kr,null)),n.createElement("button",{type:"button",className:Gt,onClick:e=>t(e,"right")},n.createElement(Jr,null)))},Element:({attributes:e,children:t})=>n.createElement("div",{style:{paddingLeft:25},...e},t)},Xr=Qr,Gr=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"relationship"===e.type||r(e),t};r(13981);const en=()=>n.createElement("svg",{className:"icon icon--relationship",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M19.0597 14.9691L19.0597 19.0946L6.01681 19.0946L6.01681 6.03028L10.0948 6.03028",className:"stroke",strokeWidth:"2"}),n.createElement("path",{d:"M19.0597 11.0039L19.0597 6.00387L14.0597 6.00387",className:"stroke",strokeWidth:"2"}),n.createElement("line",{x1:"18.7061",y1:"6.40767",x2:"13.0493",y2:"12.0645",className:"stroke",strokeWidth:"2"}));var tn=r(47489);r(16654);const rn="rich-text-relationship",nn={depth:0},an=e=>{var t;const{attributes:r,children:a,element:o}=e,{relationTo:l,value:i}=o,{collections:s,serverURL:c,routes:{api:d}}=(0,Or.Z)(),[u]=(0,n.useState)((()=>s.find((e=>e.slug===l)))),f=be(),h=gt(),{t:m,i18n:p}=(0,Rt.$)("fields"),[{data:v}]=(0,tn.Z)(`${c}${d}/${u.slug}/${null==i?void 0:i.id}`,{initialParams:nn});return n.createElement("div",{className:[rn,f&&h&&`${rn}--selected`].filter(Boolean).join(" "),contentEditable:!1,...r},n.createElement(en,null),n.createElement("div",{className:`${rn}__wrap`},n.createElement("div",{className:`${rn}__label`},m("labelRelationship",{label:(0,_r.i)(u.labels.singular,p)})),n.createElement("h5",null,v[(null===(t=null==u?void 0:u.admin)||void 0===t?void 0:t.useAsTitle)||"id"])),a)};var on=r(64012),ln=r(73480),sn=r(16951);const cn=(e,t)=>e.reduce(((e,r)=>{var n,a,o,l;return(null===(o=null===(a=null===(n=null==t?void 0:t.collections)||void 0===n?void 0:n[r.slug])||void 0===a?void 0:a.read)||void 0===o?void 0:o.permission)&&(null===(l=null==r?void 0:r.admin)||void 0===l?void 0:l.enableRichTextRelationship)?[...e,{label:r.labels.plural,value:r.slug}]:e}),[]),dn=()=>{const{collections:e}=(0,Or.Z)(),{permissions:t}=(0,Sr.a)(),{t:r}=(0,Rt.$)("fields"),[a,o]=(0,n.useState)((()=>cn(e,t))),l=(0,on.useFormFields)((([e])=>{var t;return null===(t=e.relationTo)||void 0===t?void 0:t.value}));return(0,n.useEffect)((()=>{o(cn(e,t))}),[e,t]),n.createElement(n.Fragment,null,n.createElement(sn.Z,{required:!0,label:r("relationTo"),name:"relationTo",options:a}),l&&n.createElement(ln.Z,{label:r("relatedDocument"),name:"value",relationTo:l,required:!0}))};var un=r(93780);const fn=(e,t)=>{const r=(e=>{var t;const r=Array.from(o.Editor.nodes(e,{at:o.Editor.unhangRange(e,e.selection),match:e=>!o.Editor.isEditor(e)&&o.Element.isElement(e)&&(!e.type||"p"===e.type)})),n=null==r?void 0:r[(null==r?void 0:r.length)-1];return n&&o.Element.isElement(n[0])&&(!n[0].type||"p"===n[0].type)&&""===(null===(t=n[0].children)||void 0===t?void 0:t[0].text)})(e),n=o.Editor.previous(e);r?o.Editor.isVoid(e,null==n?void 0:n[0])?(o.Transforms.insertNodes(e,{children:[{text:""}]}),o.Transforms.setNodes(e,t)):o.Transforms.setNodes(e,t):o.Transforms.insertNodes(e,t),o.Transforms.insertNodes(e,{children:[{text:""}]})};r(38723);const hn={},mn="relationship-rich-text-button",pn=({path:e})=>{const{toggleModal:t}=(0,mr.useModal)(),r=Me(),{serverURL:a,routes:{api:o},collections:l}=(0,Or.Z)(),[i,s]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),{t:u,i18n:f}=(0,Rt.$)("fields"),[h]=(0,n.useState)((()=>l.find((({admin:{enableRichTextRelationship:e}})=>e)))),m=`${e}-add-relationship`,p=(0,n.useCallback)((async(e,{relationTo:n,value:l})=>{d(!0);const i=await un.E.get(`${a}${o}/${n}/${l}?depth=0`,{headers:{"Accept-Language":f.language}}),c=await i.json();((e,{value:t,relationTo:r})=>{fn(e,{type:"relationship",value:t,relationTo:r,children:[{text:" "}]}),ot.focus(e)})(r,{value:{id:c.id},relationTo:n}),t(m),s(!1),d(!1)}),[f.language,r,t,m,o,a]);return(0,n.useEffect)((()=>{i&&t(m)}),[i,t,m]),h?n.createElement(n.Fragment,null,n.createElement(er,{className:mn,format:"relationship",onClick:()=>s(!0)},n.createElement(en,null)),i&&n.createElement(mr.Modal,{slug:m,className:`${mn}__modal`},n.createElement(vr.Z,{className:`${mn}__modal-template`},n.createElement("header",{className:`${mn}__header`},n.createElement("h3",null,u("addRelationship")),n.createElement(gr.Z,{buttonStyle:"none",onClick:()=>{t(m),s(!1)}},n.createElement(Er.Z,null))),n.createElement(wr.Z,{onSubmit:p,initialData:hn,disabled:c},n.createElement(dn,null),n.createElement(br.Z,null,u("addRelationship")))))):null},vn={Button:pn,Element:an,plugins:[Gr]},gn=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"upload"===e.type||r(e),t};var En=r(58499),wn=r(75643),bn=r(91828),yn=r(45007),xn=r(27656),kn=r(56628),Cn=r(64267),Nn=r(10254);r(28083);const Tn="rich-text-upload-modal",Sn=({closeModal:e,element:t,setRelatedCollectionConfig:r,relatedCollectionConfig:a,slug:l})=>{var i,s;const{collections:c,serverURL:d,routes:{api:u}}=(0,Or.Z)(),f=ge(),{t:h,i18n:m}=(0,Rt.$)("upload"),[p,v]=n.useState(a),[g,E]=n.useState({label:(0,_r.i)(a.labels.singular,m),value:a.slug}),[w]=n.useState((()=>c.filter((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e)))),[b,y]=n.useState((()=>(0,Nn.Z)(p,h))),[x,k]=n.useState(),[C,N]=n.useState(null),[T,S]=n.useState(null),[D,O]=n.useState(null),M=w.length>1,P=`${d}${u}/${p.slug}`,[{data:B},{setParams:R}]=(0,tn.Z)(P,{}),L=n.useCallback((r=>{const n={type:"upload",value:{id:r.id},relationTo:p.slug,children:[{text:" "}]},a=ot.findPath(f,t);o.Transforms.setNodes(f,n,{at:a}),e()}),[e,f,t,p]);return n.useEffect((()=>{const e={};D&&(e.page=D),T&&(e.where=T),C&&(e.sort=C),x&&(e.limit=x),R(e)}),[R,D,C,T,x]),n.useEffect((()=>{y((0,Nn.Z)(p,h)),k(p.admin.pagination.defaultLimit)}),[p,h]),n.useEffect((()=>{v(c.find((({slug:e})=>g.value===e)))}),[g,c]),n.createElement(mr.Modal,{className:Tn,slug:l},n.createElement(vr.Z,{width:"wide"},n.createElement("header",{className:`${Tn}__header`},n.createElement("h1",null,h("chooseLabel",{label:(0,_r.i)(p.labels.singular,m)})),n.createElement(gr.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:e})),M&&n.createElement("div",{className:`${Tn}__select-collection-wrap`},n.createElement($t.Z,{label:h("selectCollectionToBrowse")}),n.createElement(bn.Z,{className:`${Tn}__select-collection`,value:g,onChange:E,options:w.map((e=>({label:(0,_r.i)(e.labels.singular,m),value:e.slug})))})),n.createElement(yn.Z,{collection:{...p,fields:b},enableColumns:!1,enableSort:!0,modifySearchQuery:!1,handleSortChange:N,handleWhereChange:S}),n.createElement(xn.Z,{docs:null==B?void 0:B.docs,collection:p,onCardClick:t=>{L(t),r(p),e()}}),n.createElement("div",{className:`${Tn}__page-controls`},n.createElement(kn.Z,{limit:B.limit,totalPages:B.totalPages,page:B.page,hasPrevPage:B.hasPrevPage,hasNextPage:B.hasNextPage,prevPage:B.prevPage,nextPage:B.nextPage,numberOfNeighbors:1,onChange:O,disableHistoryChange:!0}),(null==B?void 0:B.totalDocs)>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${Tn}__page-info`},B.page,"-",B.totalPages>1?B.limit:B.totalDocs," ",h("general:of")," ",B.totalDocs),n.createElement(Cn.Z,{limits:null===(s=null===(i=null==p?void 0:p.admin)||void 0===i?void 0:i.pagination)||void 0===s?void 0:s.limits,limit:x,modifySearchParams:!1,handleChange:k})))))};r(99013);const Dn="edit-upload-modal",On=({slug:e,closeModal:t,relatedCollectionConfig:r,fieldSchema:a,element:l})=>{const i=ge(),[s,c]=(0,n.useState)({}),{user:d}=(0,Sr.a)(),u=(0,Dr.bU)(),{t:f,i18n:h}=(0,Rt.$)("fields"),m=(0,n.useCallback)(((e,r)=>{const n={fields:r},a=ot.findPath(i,l);o.Transforms.setNodes(i,n,{at:a}),t()}),[t,i,l]);return(0,n.useEffect)((()=>{(async()=>{const e=await(0,Tr.Z)({fieldSchema:a,data:{...(null==l?void 0:l.fields)||{}},user:d,operation:"update",locale:u,t:f});c(e)})()}),[a,l.fields,d,u,f]),n.createElement(mr.Modal,{slug:e,className:Dn},n.createElement(vr.Z,{width:"wide"},n.createElement("header",{className:`${Dn}__header`},n.createElement("h1",null,f("editLabelData",{label:(0,_r.i)(r.labels.singular,h)})),n.createElement(gr.Z,{icon:"x",round:!0,buttonStyle:"icon-label",onClick:t})),n.createElement("div",null,n.createElement(wr.Z,{onSubmit:m,initialState:s},n.createElement(xr.Z,{readOnly:!1,fieldTypes:yr.Z,fieldSchema:a}),n.createElement(br.Z,null,f("saveChanges"))))))};r(52835);const Mn="rich-text-upload",Pn={depth:0},Bn=({attributes:e,children:t,element:r,path:a,fieldProps:l})=>{var i,s,c,d;const{relationTo:u,value:f}=r,{toggleModal:h}=(0,mr.useModal)(),{collections:m,serverURL:p,routes:{api:v}}=(0,Or.Z)(),[g,E]=(0,n.useState)(void 0),[w,b]=(0,n.useState)((()=>m.find((e=>e.slug===u)))),{t:y,i18n:x}=(0,Rt.$)("fields"),k=ge(),C=be(),N=gt(),T=`${a}-edit-upload-${g}`,[{data:S}]=(0,tn.Z)(`${p}${v}/${w.slug}/${null==f?void 0:f.id}`,{initialParams:Pn}),D=(0,wn.Z)(w,S),O=(0,n.useCallback)((()=>{const e=ot.findPath(k,r);o.Transforms.removeNodes(k,{at:e})}),[k,r]),M=(0,n.useCallback)((()=>{h(T),E(null)}),[h,T]);(0,n.useEffect)((()=>{g&&h(T)}),[g,h,T]);const P=null===(d=null===(c=null===(s=null===(i=null==l?void 0:l.admin)||void 0===i?void 0:i.upload)||void 0===s?void 0:s.collections)||void 0===c?void 0:c[w.slug])||void 0===d?void 0:d.fields;return n.createElement("div",{className:[Mn,C&&N&&`${Mn}--selected`].filter(Boolean).join(" "),contentEditable:!1,...e},n.createElement("div",{className:`${Mn}__card`},n.createElement("div",{className:`${Mn}__topRow`},n.createElement("div",{className:`${Mn}__thumbnail`},D?n.createElement("img",{src:D,alt:null==S?void 0:S.filename}):n.createElement(En.Z,null)),n.createElement("div",{className:`${Mn}__topRowRightPanel`},n.createElement("div",{className:`${Mn}__collectionLabel`},(0,_r.i)(w.labels.singular,x)),n.createElement("div",{className:`${Mn}__actions`},P&&n.createElement(gr.Z,{icon:"edit",round:!0,buttonStyle:"icon-label",className:`${Mn}__actionButton`,onClick:e=>{e.preventDefault(),E("edit")},tooltip:y("general:edit")}),n.createElement(gr.Z,{icon:"swap",round:!0,buttonStyle:"icon-label",className:`${Mn}__actionButton`,onClick:e=>{e.preventDefault(),E("swap")},tooltip:y("swapUpload")}),n.createElement(gr.Z,{icon:"x",round:!0,buttonStyle:"icon-label",className:`${Mn}__actionButton`,onClick:e=>{e.preventDefault(),O()},tooltip:y("removeUpload")})))),n.createElement("div",{className:`${Mn}__bottomRow`},n.createElement("strong",null,null==S?void 0:S.filename))),t,"swap"===g&&n.createElement(Sn,{slug:T,element:r,closeModal:M,setRelatedCollectionConfig:b,relatedCollectionConfig:w}),"edit"===g&&P&&n.createElement(On,{slug:T,closeModal:M,relatedCollectionConfig:w,fieldSchema:P,element:r}))};r(71168);const Rn=()=>n.createElement("svg",{className:"icon icon--upload",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M20.06,5.12h-15v15h15Zm-2,2v7L15.37,11l-3.27,4.1-2-1.58-3,3.74V7.12Z",className:"fill"}),n.createElement("circle",{cx:"9.69",cy:"9.47",r:"0.97",className:"fill"}));r(59622);const Ln="upload-rich-text-button",Fn="rich-text-upload-modal",_n=({path:e})=>{var t,r;const{t:a,i18n:o}=(0,Rt.$)("upload"),{toggleModal:l,isModalOpen:i}=(0,mr.useModal)(),s=Me(),{serverURL:c,routes:{api:d},collections:u}=(0,Or.Z)(),[f]=(0,n.useState)((()=>u.filter((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e)))),[h,m]=(0,n.useState)(!1),[p,v]=(0,n.useState)((()=>{const e=u.find((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e));if(e)return{label:(0,_r.i)(e.labels.singular,o),value:e.slug}})),[g,E]=(0,n.useState)((()=>u.find((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e)))),[w,b]=(0,n.useState)((()=>g?(0,Nn.Z)(g,a):void 0)),[y,x]=(0,n.useState)(),[k,C]=(0,n.useState)(null),[N,T]=(0,n.useState)(null),[S,D]=(0,n.useState)(null),O=`${e}-add-upload`,M=f.length>1,P=i(O),B=P?`${c}${d}/${g.slug}`:null,[{data:R},{setParams:L}]=(0,tn.Z)(B,{});return(0,n.useEffect)((()=>{g&&b((0,Nn.Z)(g,a))}),[g,a]),(0,n.useEffect)((()=>{h&&l(O)}),[h,l,O]),(0,n.useEffect)((()=>{const e={};S&&(e.page=S),N&&(e.where=N),k&&(e.sort=k),y&&(e.limit=y),L(e)}),[L,S,k,N,y]),(0,n.useEffect)((()=>{p&&E(u.find((({slug:e})=>p.value===e)))}),[p,u]),g?n.createElement(n.Fragment,null,n.createElement(er,{className:Ln,format:"upload",onClick:()=>m(!0)},n.createElement(Rn,null)),h&&n.createElement(mr.Modal,{className:Fn,slug:O},P&&n.createElement(vr.Z,{width:"wide"},n.createElement("header",{className:`${Fn}__header`},n.createElement("h1",null,a("fields:addLabel",{label:(0,_r.i)(g.labels.singular,o)})),n.createElement(gr.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:()=>{l(O),m(!1)}})),M&&n.createElement("div",{className:`${Fn}__select-collection-wrap`},n.createElement($t.Z,{label:a("selectCollectionToBrowse")}),n.createElement(bn.Z,{className:`${Ln}__select-collection`,value:p,onChange:v,options:f.map((e=>({label:(0,_r.i)(e.labels.singular,o),value:e.slug})))})),n.createElement(yn.Z,{collection:{...g,fields:w},enableColumns:!1,enableSort:!0,modifySearchQuery:!1,handleSortChange:C,handleWhereChange:T}),n.createElement(xn.Z,{docs:null==R?void 0:R.docs,collection:g,onCardClick:e=>{((e,{value:t,relationTo:r})=>{fn(e,{type:"upload",value:t,relationTo:r,children:[{text:" "}]}),ot.focus(e)})(s,{value:{id:e.id},relationTo:g.slug}),m(!1),l(O)}}),n.createElement("div",{className:`${Fn}__page-controls`},n.createElement(kn.Z,{limit:R.limit,totalPages:R.totalPages,page:R.page,hasPrevPage:R.hasPrevPage,hasNextPage:R.hasNextPage,prevPage:R.prevPage,nextPage:R.nextPage,numberOfNeighbors:1,onChange:D,disableHistoryChange:!0}),(null==R?void 0:R.totalDocs)>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${Fn}__page-info`},R.page,"-",R.totalPages>1?R.limit:R.totalDocs," ",a("general:of")," ",R.totalDocs),n.createElement(Cn.Z,{limits:null===(r=null===(t=null==g?void 0:g.admin)||void 0===t?void 0:t.pagination)||void 0===r?void 0:r.limits,limit:y,modifySearchParams:!1,handleChange:x})))))):null},jn={h1:rr,h2:ar,h3:lr,h4:sr,h5:dr,h6:fr,link:Ar,ol:Vr,ul:Ur,li:qr,indent:Xr,relationship:vn,upload:{Button:_n,Element:Bn,plugins:[gn]}},$n={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code"},An=(e,t)=>"function"==typeof t?t(e):e,Wn=(e,t)=>t.reduce(((e,t)=>{if("object"==typeof t&&Array.isArray(t.plugins))return t.plugins.reduce(An,e);if("string"==typeof t){if(jn[t]&&jn[t].plugins)return jn[t].plugins.reduce(An,e);if(Jt[t]&&Jt[t].plugins)return Jt[t].plugins.reduce(An,e)}return e}),e);var zn=r(92077),Hn=r(77070);function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vn=new WeakMap,In=new WeakMap;class Un{}class qn extends Un{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}class Kn extends Un{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}var Jn=e=>In.get(e);function Yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xn=new WeakSet,Gn=e=>{var t=[],r=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var a={text:e};Xn.add(a),e=a}if(o.Text.isText(e)){var l=e;o.Text.isText(n)&&Xn.has(n)&&Xn.has(l)&&o.Text.equals(n,l,{loose:!0})?n.text+=l.text:t.push(l)}else if(o.Element.isElement(e))t.push(e);else{if(!(e instanceof Un))throw new Error("Unexpected hyperscript child object: ".concat(e));var i=t[t.length-1];o.Text.isText(i)||(r(""),i=t[t.length-1]),e instanceof qn?((e,t)=>{var r=e.text.length;Vn.set(e,[r,t])})(i,e):e instanceof Kn&&((e,t)=>{var r=e.text.length;In.set(e,[r,t])})(i,e)}}};for(var n of e.flat(1/0))r(n);return t};function ea(e,t,r){return Qn(Qn({},t),{},{children:Gn(r)})}function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var na={anchor:function(e,t,r){return new qn(t)},cursor:function(e,t,r){return[new qn(t),new Kn(t)]},editor:function(e,t,r){var n,a=[];for(var l of r)o.Range.isRange(l)?n=l:a.push(l);var i,s=Gn(a),c={},d=(0,o.createEditor)();for(var[u,f]of(Object.assign(d,t),d.children=s,o.Node.texts(d))){var h=(i=u,Vn.get(i)),m=Jn(u);if(null!=h){var[p]=h;c.anchor={path:f,offset:p}}if(null!=m){var[v]=m;c.focus={path:f,offset:v}}}if(c.anchor&&!c.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!c.anchor&&c.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=n?d.selection=n:o.Range.isRange(c)&&(d.selection=c),d},element:ea,focus:function(e,t,r){return new Kn(t)},fragment:function(e,t,r){return Gn(r)},selection:function(e,t,r){var n=r.find((e=>e instanceof qn)),a=r.find((e=>e instanceof Kn));if(!n||null==n.offset||null==n.path)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!a||null==a.offset||null==a.path)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return Qn({anchor:{offset:n.offset,path:n.path},focus:{offset:a.offset,path:a.path}},t)},text:function(e,t,r){var n=Gn(r);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[a]=n;if(null==a&&(a={text:""}),!o.Text.isText(a))throw new Error("\n    The <text> hyperscript tag can only contain text content as children.");return Xn.delete(a),Object.assign(a,t),a}},aa=e=>function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var l=e[t];if(!l)throw new Error("No hyperscript creator found for tag: <".concat(t,">"));null==r&&(r={}),(0,Ct.P)(r)||(a=[r].concat(a),r={});var i=l(t,r,a=a.filter((e=>Boolean(e))).flat());return i},oa=e=>{var t={},r=function(r){var n=e[r];if("object"!=typeof n)throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(r,">  tag you passed: ").concat(n));t[r]=(e,t,r)=>ea(0,ra(ra({},n),t),r)};for(var n in e)r(n);return t},la=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,r=oa(t),n=ra(ra(ra({},na),r),e.creators),a=aa(n);return a}();const ia={A:e=>({type:"link",newTab:"_blank"===e.getAttribute("target"),url:e.getAttribute("href")}),BLOCKQUOTE:()=>({type:"blockquote"}),H1:()=>({type:"h1"}),H2:()=>({type:"h2"}),H3:()=>({type:"h3"}),H4:()=>({type:"h4"}),H5:()=>({type:"h5"}),H6:()=>({type:"h6"}),LI:()=>({type:"li"}),OL:()=>({type:"ol"}),P:()=>({type:"p"}),PRE:()=>({type:"code"}),UL:()=>({type:"ul"})},sa={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underline:!0})},ca=e=>{if(3===e.nodeType)return e.textContent;if(1!==e.nodeType)return null;if("BR"===e.nodeName)return"\n";const{nodeName:t}=e;let r=e;"PRE"===t&&e.childNodes[0]&&"CODE"===e.childNodes[0].nodeName&&([r]=e.childNodes);let n=Array.from(r.childNodes).map(ca).flat();if(0===n.length&&(n=[{text:""}]),"BODY"===e.nodeName)return la("fragment",{},n);if(ia[t]){const r=ia[t](e);return la("element",r,n)}if(sa[t]){const r=sa[t](e);return n.map((e=>la("text",r,e)))}return n},da=e=>{const{insertData:t}=e,r=e;return r.insertData=e=>{if(!e.types.includes("application/x-slate-fragment")){const t=e.getData("text/html");if(t){const e=(new DOMParser).parseFromString(t,"text/html"),n=ca(e.body);return void o.Transforms.insertFragment(r,n)}}t(e)},r},ua=(e,t)=>{const r=[...e];return(e.indexOf("ul")>-1||e.indexOf("ol")>-1)&&r.push("li"),r.reduce(((e,r)=>"object"==typeof r&&r.name?{...e,[r.name]:r}:"string"==typeof r&&t[r]?{...e,[r]:t[r]}:e),{})},fa=["h1","h2","h3","h4","h5","h6","link"],ha=e=>{const t=e;return t.shouldBreakOutOnEnter=e=>fa.includes(String(e.type)),t};r(33329);const ma=["h1","h2","h3","h4","h5","h6","ul","ol","indent","link","relationship","upload"],pa=["bold","italic","underline","strikethrough","code"],va="rich-text",ga=jt()((e=>{const{path:t,name:r,required:l,validate:i=Lt.richText,label:s,admin:c,admin:{readOnly:d,style:u,className:f,width:h,placeholder:m,description:p,condition:v,hideGutter:g}={}}=e,E=(null==c?void 0:c.elements)||ma,w=(null==c?void 0:c.leaves)||pa,b=t||r,{i18n:y}=(0,Rt.$)(),[x,k]=(0,n.useState)(!1),[C,N]=(0,n.useState)({}),[T,S]=(0,n.useState)({}),D=(0,n.useRef)(null),O=(0,n.useRef)(null),M=(0,n.useCallback)((({attributes:t,children:r,element:a})=>{const o=C[null==a?void 0:a.type],l=null==o?void 0:o.Element;return l?n.createElement(l,{attributes:t,element:a,path:b,fieldProps:e,editorRef:D},r):n.createElement("div",{...t},r)}),[C,b,e]),P=(0,n.useCallback)((({attributes:t,children:r,leaf:a})=>{const o=Object.entries(T).filter((([e])=>a[e]));return o.length>0?o.reduce(((t,[r],o)=>{var l,i;if(null===(l=T[r])||void 0===l?void 0:l.Leaf){const l=null===(i=T[r])||void 0===i?void 0:i.Leaf;return n.createElement(l,{key:o,leaf:a,path:b,fieldProps:e,editorRef:D},t)}return t}),n.createElement("span",{...t},r)):n.createElement("span",{...t},r)}),[T,b,e]),B=(0,n.useCallback)(((e,t)=>i(e,{...t,required:l})),[i,l]),R=(0,Ft.Z)({path:b,validate:B,condition:v}),{value:L,showError:F,setValue:_,errorMessage:j,initialValue:$}=R,A=[va,"field-type",f,F&&"error",d&&`${va}--read-only`,!g&&`${va}--gutter`].filter(Boolean).join(" "),W=(0,n.useMemo)((()=>{let e=ha((e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];Dt.withoutSaving(t,(()=>{o.Editor.withoutNormalizing(t,(()=>{for(var e of n)t.apply(e)}))})),e.redos.pop(),e.undos.push(n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];Dt.withoutSaving(t,(()=>{o.Editor.withoutNormalizing(t,(()=>{var e=n.map(o.Operation.inverse).reverse();for(var r of e)t.apply(r)}))})),e.redos.push(n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:a}=t,{undos:o}=a,l=o[o.length-1],i=l&&l[l.length-1],s=Pt(e,i),c=Dt.isSaving(t),d=Dt.isMerging(t);if(null==c&&(c=Mt(e)),c){if(null==d&&(d=null!=l&&(0!==n.length||Ot(e,i)||s)),l&&d)s&&l.pop(),l.push(e);else{var u=[e];o.push(u)}for(;o.length>100;)o.shift();Bt(e)&&(a.redos=[])}r(e)},t})(xt((0,o.createEditor)())));return e=da(e),e=Wn(e,E),e=Wn(e,w),e}),[E,w]);if((0,n.useEffect)((()=>{if(!x){const e=ua(E,jn),t=ua(w,Jt);N(e),S(t),k(!0)}}),[x,E,w]),(0,n.useEffect)((()=>{function e(e){var t,r;const n='button, a, [role="button"]';[...(null===(t=O.current)||void 0===t?void 0:t.querySelectorAll(n))||[],...(null===(r=D.current)||void 0===r?void 0:r.querySelectorAll(n))||[]].forEach((t=>{const r="BUTTON"===t.tagName,n="disabled"===e;t.setAttribute("tabIndex",n?"-1":"0"),r&&t.setAttribute("disabled",n?"disabled":null)}))}return x&&d&&e("disabled"),()=>{x&&d&&e("enabled")}}),[x,d]),(0,n.useEffect)((()=>{Array.isArray($)&&$.length>0&&(W.selection&&ot.deselect(W),W.history={redos:[],undos:[]},W.children=$)}),[$,W]),!x)return null;let z=L;if("string"==typeof z)try{z=JSON.parse(z)}catch(e){}return z||(z=zn.default),n.createElement("div",{className:A,style:{...u,width:h}},n.createElement("div",{className:`${va}__wrap`},n.createElement(At.Z,{showError:F,message:j}),n.createElement($t.Z,{htmlFor:`field-${b.replace(/\./gi,"__")}`,label:s,required:l}),n.createElement(wt,{editor:W,value:z,onChange:e=>{d||e===zn.default||e===L||_(e)}},n.createElement("div",{className:`${va}__wrapper`},n.createElement("div",{className:`${va}__toolbar`,ref:O},n.createElement("div",{className:`${va}__toolbar-wrap`},E.map(((t,r)=>{let a;"object"==typeof t&&(null==t?void 0:t.name)&&(a=t.name),"string"==typeof t&&(a=t);const o=C[a],l=null==o?void 0:o.Button;return l?n.createElement(l,{fieldProps:e,key:r,path:b}):null})),w.map(((t,r)=>{let a;"object"==typeof t&&(null==t?void 0:t.name)&&(a=t.name),"string"==typeof t&&(a=t);const o=T[a],l=null==o?void 0:o.Button;return l?n.createElement(l,{fieldProps:e,key:r,path:b}):null})))),n.createElement("div",{className:`${va}__editor`,ref:D},n.createElement(kt,{id:`field-${b.replace(/\./gi,"__")}`,className:`${va}__input`,renderElement:M,renderLeaf:P,placeholder:(0,_r.i)(m,y),spellCheck:!0,readOnly:d,onKeyDown:e=>{if("Enter"===e.key)if(e.shiftKey)e.preventDefault(),W.insertText("\n");else{const t=o.Node.descendant(W,W.selection.anchor.path.slice(0,-1));if(o.Element.isElement(t)&&W.shouldBreakOutOnEnter(t)){e.preventDefault();const t=o.Node.descendant(W,W.selection.anchor.path);o.Text.isText(t)&&String(t.text).length===W.selection.anchor.offset?o.Transforms.insertNodes(W,{children:[{text:""}]}):(o.Transforms.splitNodes(W),o.Transforms.setNodes(W,{}))}}if("Backspace"===e.key){const e=o.Node.descendant(W,W.selection.anchor.path.slice(0,-1));if(o.Element.isElement(e)&&"li"===e.type){const e=o.Node.descendant(W,W.selection.anchor.path);o.Text.isText(e)&&1===String(e.text).length&&(o.Transforms.unwrapNodes(W,{match:e=>o.Element.isElement(e)&&Qt.includes(e.type),split:!0}),o.Transforms.setNodes(W,{}))}else W.isVoid(e)&&o.Transforms.removeNodes(W)}Object.keys($n).forEach((t=>{if((0,a.ZP)(t,e)){e.preventDefault();zt(W,$n[t])}}))}})))),n.createElement(Hn.Z,{value:L,description:p})))}))},59619:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},l=1;l<20;l++)o["f"+l]=111+l;function i(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return s(e,t)})),a=function(e){return n.some((function(t){return c(t,e)}))};return null==r?a:a(r)}function s(e,t){var r=t&&t.byKey,a={},o=(e=e.replace("++","+add")).split("+"),l=o.length;for(var i in n)a[n[i]]=!1;var s=!0,c=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var p=h.value,v=p.endsWith("?")&&p.length>1;v&&(p=p.slice(0,-1));var g=u(p),E=n[g];1!==l&&E||(r?a.key=g:a.which=d(p)),E&&(a[E]=!v||null)}}catch(e){c=!0,f=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw f}}return a}function c(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function d(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=a[e]||e}t.TB=function(e,t){return i(e,{byKey:!0},t)}}}]);